<!doctype html>
<link rel="stylesheet" href="../../style.css">
<title>scroll :: ff1f7c4</title>
<h1><a href="../index.html" title="Back to Repository">&larr;&#xFE0E;</a> scroll :: ff1f7c4</h1>
<hr>
<table id="main" cellpadding="0" cellspacing="0">
<tr class="item"><td class="linenumber"><a href="#l1" name="l1">1</a></td><td><pre><span class="commit">commit ff1f7c496cdf678e9bae0354a274928525cc7587</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l2" name="l2">2</a></td><td><pre>Author: acidvegas &lt;acid.vegas@acid.vegas&gt;</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l3" name="l3">3</a></td><td><pre>Date:   Sun Mar 22 03:38:50 2020 -0400</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l4" name="l4">4</a></td><td><pre></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l5" name="l5">5</a></td><td><pre>    massive cleanup, big updates coming</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l6" name="l6">6</a></td><td><pre>---</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l7" name="l7">7</a></td><td><pre> LICENSE                        |   2 <span class="insertion">+</span><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l8" name="l8">8</a></td><td><pre> README.md                      |  20 <span class="insertion">+</span><span class="deletion">---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l9" name="l9">9</a></td><td><pre> scroll/{data =&gt; }/.gitignore   |   0</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l10" name="l10">10</a></td><td><pre> scroll/art/.gitignore          |   2 <span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l11" name="l11">11</a></td><td><pre> scroll/core/ascii2png.py       | 166 <span class="deletion">-----------------------------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l12" name="l12">12</a></td><td><pre> scroll/core/config.py          |   9 <span class="insertion">+</span><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l13" name="l13">13</a></td><td><pre> scroll/core/constants.py       | 229 <span class="deletion">-----------------------------------------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l14" name="l14">14</a></td><td><pre> scroll/core/database.py        |  35 <span class="insertion">++</span><span class="deletion">-----</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l15" name="l15">15</a></td><td><pre> scroll/core/debug.py           |  55 <span class="deletion">----------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l16" name="l16">16</a></td><td><pre> scroll/core/functions.py       |  18 <span class="deletion">----</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l17" name="l17">17</a></td><td><pre> scroll/core/irc.py             | 216 <span class="insertion">+++++++++++++</span><span class="deletion">-------------------------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l18" name="l18">18</a></td><td><pre> scroll/core/mircart/canvas.py  |  82 <span class="deletion">---------------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l19" name="l19">19</a></td><td><pre> scroll/core/mircart/mircart.py | 216 <span class="deletion">--------------------------------------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l20" name="l20">20</a></td><td><pre> scroll/core/mircart/png.py     |  60 <span class="deletion">-----------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l21" name="l21">21</a></td><td><pre> scroll/data/DejaVuSansMono.ttf | Bin <span class="deletion">340712</span> -&gt; <span class="insertion">0</span> bytes</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l22" name="l22">22</a></td><td><pre> scroll/data/art/.gitignore     |   4 <span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l23" name="l23">23</a></td><td><pre> scroll/data/logs/.gitignore    |   4 <span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l24" name="l24">24</a></td><td><pre> scroll/scroll.py               |  15 <span class="insertion">++</span><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l25" name="l25">25</a></td><td><pre> 18 files changed, 91 insertions(+), 1042 deletions(-)</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l26" name="l26">26</a></td><td><pre></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l27" name="l27">27</a></td><td><pre><span class="bold">diff --git a/LICENSE b/LICENSE</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l28" name="l28">28</a></td><td><pre><span class="bold">index b63b809..0f72fc8 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l29" name="l29">29</a></td><td><pre><span class="bold">--- a/LICENSE</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l30" name="l30">30</a></td><td><pre><span class="bold">+++ b/LICENSE</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l31" name="l31">31</a></td><td><pre><span class="hunk">@@ -1,6 +1,6 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l32" name="l32">32</a></td><td><pre> ISC License</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l33" name="l33">33</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l34" name="l34">34</a></td><td><pre><span class="deletion">-Copyright (c) 2019, acidvegas &lt;acid.vegas@acid.vegas&gt;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l35" name="l35">35</a></td><td><pre><span class="insertion">+</span><span class="insertion">Copyright (c) 2020, acidvegas &lt;acid.vegas@acid.vegas&gt;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l36" name="l36">36</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l37" name="l37">37</a></td><td><pre> Permission to use, copy, modify, and/or distribute this software for any</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l38" name="l38">38</a></td><td><pre> purpose with or without fee is hereby granted, provided that the above</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l39" name="l39">39</a></td><td><pre><span class="bold">diff --git a/README.md b/README.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l40" name="l40">40</a></td><td><pre><span class="bold">index c011a50..d629389 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l41" name="l41">41</a></td><td><pre><span class="bold">--- a/README.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l42" name="l42">42</a></td><td><pre><span class="bold">+++ b/README.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l43" name="l43">43</a></td><td><pre><span class="hunk">@@ -5,16 +5,15 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l44" name="l44">44</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l45" name="l45">45</a></td><td><pre> ## Requirements</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l46" name="l46">46</a></td><td><pre> - [Python](https://www.python.org/downloads/) *(**Note:** This script was developed to be used with the latest version of Python)*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l47" name="l47">47</a></td><td><pre><span class="deletion">-- [Pillow](https://pypi.org/project/Pillow/) *(Required by [core/mircart.py](scroll/core/mircart.py))*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l48" name="l48">48</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l49" name="l49">49</a></td><td><pre> ## Setup</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l50" name="l50">50</a></td><td><pre><span class="deletion">-Edit the [core/config.py](scroll/core/config.py) file and then place your art files in the [data/art](scroll/data/art) directory.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l51" name="l51">51</a></td><td><pre><span class="insertion">+</span><span class="insertion">Edit the [core/config.py](scroll/core/config.py) file and then place your art files in the [art](scroll/art) directory.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l52" name="l52">52</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l53" name="l53">53</a></td><td><pre> This repository by itself does not contain any art. A large organized collection of IRC art can be cloned from the [ircart](https://github.com/ircart/ircart) repository directory into your [data/art](scroll/data/art) directory:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l54" name="l54">54</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l55" name="l55">55</a></td><td><pre><span class="deletion">-`git clone https://github.com/ircart/ircart.git $SCROLL_DIR/scroll/data/art` *(change the `$SCROLL_DIR` to where you cloned it)*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l56" name="l56">56</a></td><td><pre><span class="insertion">+</span><span class="insertion">`git clone https://github.com/ircart/ircart.git $SCROLL_DIR/scroll/art` *(change the `$SCROLL_DIR` to where you cloned it)*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l57" name="l57">57</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l58" name="l58">58</a></td><td><pre><span class="deletion">-**Warning:** Try not to have any filenames in your [data/art](scroll/data/art) directory that are the same as any of the [Commands](#commands) below or you won't be able to play them!</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l59" name="l59">59</a></td><td><pre><span class="insertion">+</span><span class="insertion">**Warning:** Try not to have any filenames in your [art](scroll/art) directory that are the same as any of the [Commands](#commands) below or you won't be able to play them!</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l60" name="l60">60</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l61" name="l61">61</a></td><td><pre> ## Commands</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l62" name="l62">62</a></td><td><pre> ### User Commands</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l63" name="l63">63</a></td><td><pre><span class="hunk">@@ -23,12 +22,9 @@</span> </span>This repository by itself does not contain any art. A large organized collection</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l64" name="l64">64</a></td><td><pre> | @scroll                         | information about scroll                                                                                                                         |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l65" name="l65">65</a></td><td><pre> | .ascii dirs                     | list of ascii directories                                                                                                                        |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l66" name="l66">66</a></td><td><pre> | .ascii list                     | list of ascii filenames                                                                                                                          |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l67" name="l67">67</a></td><td><pre><span class="deletion">-| .ascii png \&lt;url&gt;               | convert an art paste into an image *(must be a [Pastebin](https://pastebin.com/) or [Termbin](https://termbin.com/) link)*                       |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l68" name="l68">68</a></td><td><pre> | .ascii random [dir]             | play random art, optionally from the [dir] directory only                                                                                        |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l69" name="l69">69</a></td><td><pre><span class="deletion">-| .ascii remote \&lt;url&gt;            | play remote art pastes *(must be a [Pastebin](https://pastebin.com/) or [Termbin](https://termbin.com/) link)*                                   |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l70" name="l70">70</a></td><td><pre> | .ascii search \&lt;query&gt;          | search [data/art](scroll/data/art) for \&lt;query&gt;                                                                                                  |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l71" name="l71">71</a></td><td><pre> | .ascii stop                     | stop playing art                                                                                                                                 |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l72" name="l72">72</a></td><td><pre><span class="deletion">-| .ascii upload [\&lt;url&gt; \&lt;title&gt;] | list of uploaded art pastes or upload \&lt;url&gt; as \&lt;title&gt; *(must be a [Pastebin](https://pastebin.com/) or [Termbin](https://termbin.com/) link)* |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l73" name="l73">73</a></td><td><pre> | .ascii \&lt;name&gt; [\&lt;trunc&gt;]       | play \&lt;name&gt; art from [data/art](scroll/data/art) *(see usage below)*                                                                            |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l74" name="l74">74</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l75" name="l75">75</a></td><td><pre> #### Note</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l76" name="l76">76</a></td><td><pre><span class="hunk">@@ -45,35 +41,27 @@</span> </span>The \&lt;trunc&gt; argument for the `.ascii` command allows you to truncate lines off</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l77" name="l77">77</a></td><td><pre> | .update                       | update the [data/art](scroll/data/art) directory *(see usage below)*                                |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l78" name="l78">78</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l79" name="l79">79</a></td><td><pre> #### Note</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l80" name="l80">80</a></td><td><pre><span class="deletion">-The `.update` command is if you cloned a git repository, like the one mentioned in the [Setup](#setup) section, for your [data/ascii](scroll/data/ascii) directory. This will simply perform a `git pull` on the repository to update it.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l81" name="l81">81</a></td><td><pre><span class="insertion">+</span><span class="insertion">The `.update` command is if you cloned a git repository, like the one mentioned in the [Setup](#setup) section, for your [art](scroll/art) directory. This will simply perform a `git pull` on the repository to update it.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l82" name="l82">82</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l83" name="l83">83</a></td><td><pre> ## Config Settings</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l84" name="l84">84</a></td><td><pre> | Setting         | Description                                                                           |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l85" name="l85">85</a></td><td><pre> | --------------- | ------------------------------------------------------------------------------------- |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l86" name="l86">86</a></td><td><pre> | max_lines       | maximum number of lines an art can be to be played outside of the **#scroll** channel |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l87" name="l87">87</a></td><td><pre><span class="deletion">-| max_png_bytes   | maximum size *(in bytes)* for `.ascii png` usage                                      |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l88" name="l88">88</a></td><td><pre> | max_results     | maximum number of results returned from a search                                      |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l89" name="l89">89</a></td><td><pre><span class="deletion">-| max_uploads     | maximum number of uploads to store                                                    |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l90" name="l90">90</a></td><td><pre><span class="deletion">-| max_uploads_per | maximum number of uploads per-nick                                                    |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l91" name="l91">91</a></td><td><pre> | throttle_cmd    | command usage throttle in seconds                                                     |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l92" name="l92">92</a></td><td><pre> | throttle_msg    | message throttle in seconds                                                           |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l93" name="l93">93</a></td><td><pre><span class="deletion">-| throttle_png    | `.ascii png` throttle in seconds                                                      |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l94" name="l94">94</a></td><td><pre> | rnd_exclude     | directories to ignore with `.ascii random`. *(comma-seperated list)*                  |</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l95" name="l95">95</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l96" name="l96">96</a></td><td><pre> ## Screens</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l97" name="l97">97</a></td><td><pre> This section is not finished. Screens will be added soon.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l98" name="l98">98</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l99" name="l99">99</a></td><td><pre> ## Todo</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l100" name="l100">100</a></td><td><pre><span class="deletion">-* Check paste size before downloading.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l101" name="l101">101</a></td><td><pre><span class="deletion">-* Store image bytes in memory so creating files locally is not required.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l102" name="l102">102</a></td><td><pre> * Improve truncation of the left and right by retaining the last known color code.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l103" name="l103">103</a></td><td><pre> * Add ascii tagging to database. Lets you tag asciis with hashtags for searching. Maybe include an author tag also.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l104" name="l104">104</a></td><td><pre> * Add an ascii amplification factor and zigzag to the trunc array, and maybe rename trunc to morph.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l105" name="l105">105</a></td><td><pre><span class="deletion">-* Use the maximum allowed upload size for IMGUR upload, and track it to a maximum of 50 per hour. </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l106" name="l106">106</a></td><td><pre> * Controls for admins to move, rename, delete, and download ascii on the fly.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l107" name="l107">107</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l108" name="l108">108</a></td><td><pre> ## Mirrors</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l109" name="l109">109</a></td><td><pre> - [acid.vegas](https://acid.vegas/scroll) *(main)*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l110" name="l110">110</a></td><td><pre><span class="deletion">-- [SuperNETs](https://git.supernets.org/ircart/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l111" name="l111">111</a></td><td><pre> - [GitHub](https://github.com/ircart/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l112" name="l112">112</a></td><td><pre> - [GitLab](https://gitlab.com/ircart/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l113" name="l113">113</a></td><td><pre><span class="bold">diff --git a/scroll/data/.gitignore b/scroll/.gitignore</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l114" name="l114">114</a></td><td><pre><span class="bold">similarity index 100%</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l115" name="l115">115</a></td><td><pre><span class="bold">rename from scroll/data/.gitignore</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l116" name="l116">116</a></td><td><pre><span class="bold">rename to scroll/.gitignore</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l117" name="l117">117</a></td><td><pre><span class="bold">diff --git a/scroll/art/.gitignore b/scroll/art/.gitignore</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l118" name="l118">118</a></td><td><pre><span class="bold">new file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l119" name="l119">119</a></td><td><pre><span class="bold">index 0000000..c96a04f</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l120" name="l120">120</a></td><td><pre><span class="bold">--- /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l121" name="l121">121</a></td><td><pre><span class="bold">+++ b/scroll/art/.gitignore</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l122" name="l122">122</a></td><td><pre><span class="hunk">@@ -0,0 +1,2 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l123" name="l123">123</a></td><td><pre><span class="insertion">+</span><span class="insertion">*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l124" name="l124">124</a></td><td><pre><span class="insertion">+</span><span class="insertion">!.gitignore</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l125" name="l125">125</a></td><td><pre><span class="bold">diff --git a/scroll/core/ascii2png.py b/scroll/core/ascii2png.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l126" name="l126">126</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l127" name="l127">127</a></td><td><pre><span class="bold">index 7c82486..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l128" name="l128">128</a></td><td><pre><span class="bold">--- a/scroll/core/ascii2png.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l129" name="l129">129</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l130" name="l130">130</a></td><td><pre><span class="hunk">@@ -1,166 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l131" name="l131">131</a></td><td><pre><span class="deletion">-#!/usr/bin/env python</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l132" name="l132">132</a></td><td><pre><span class="deletion">-# -*- coding: utf-8 -*-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l133" name="l133">133</a></td><td><pre><span class="deletion">-# Scroll IRC Art Bot - Developed by acidvegas in Python (https://acid.vegas/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l134" name="l134">134</a></td><td><pre><span class="deletion">-# ascii2png.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l135" name="l135">135</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l136" name="l136">136</a></td><td><pre><span class="deletion">-'''</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l137" name="l137">137</a></td><td><pre><span class="deletion">-Credits to VXP for making the original &quot;pngbot&quot; script (https://github.com/lalbornoz/MiRCARTools)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l138" name="l138">138</a></td><td><pre><span class="deletion">-'''</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l139" name="l139">139</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l140" name="l140">140</a></td><td><pre><span class="deletion">-import os</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l141" name="l141">141</a></td><td><pre><span class="deletion">-import urllib.request</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l142" name="l142">142</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l143" name="l143">143</a></td><td><pre><span class="deletion">-from PIL import Image, ImageDraw, ImageFont</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l144" name="l144">144</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l145" name="l145">145</a></td><td><pre><span class="deletion">-def flip_cell_state(cellState, bit):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l146" name="l146">146</a></td><td><pre><span class="deletion">-	if cellState &amp; bit:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l147" name="l147">147</a></td><td><pre><span class="deletion">-		return cellState &amp; ~bit</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l148" name="l148">148</a></td><td><pre><span class="deletion">-	else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l149" name="l149">149</a></td><td><pre><span class="deletion">-		return cellState | bit</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l150" name="l150">150</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l151" name="l151">151</a></td><td><pre><span class="deletion">-def parse_char(colourSpec, curColours):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l152" name="l152">152</a></td><td><pre><span class="deletion">-	if len(colourSpec) &gt; 0:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l153" name="l153">153</a></td><td><pre><span class="deletion">-		colourSpec = colourSpec.split(',')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l154" name="l154">154</a></td><td><pre><span class="deletion">-		if len(colourSpec) == 2 and len(colourSpec[1]) &gt; 0:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l155" name="l155">155</a></td><td><pre><span class="deletion">-			return (int(colourSpec[0] or curColours[0]), int(colourSpec[1]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l156" name="l156">156</a></td><td><pre><span class="deletion">-		elif len(colourSpec) == 1 or len(colourSpec[1]) == 0:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l157" name="l157">157</a></td><td><pre><span class="deletion">-			return (int(colourSpec[0]), curColours[1])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l158" name="l158">158</a></td><td><pre><span class="deletion">-	else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l159" name="l159">159</a></td><td><pre><span class="deletion">-		return (15, 1)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l160" name="l160">160</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l161" name="l161">161</a></td><td><pre><span class="deletion">-def ascii_png(url):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l162" name="l162">162</a></td><td><pre><span class="deletion">-	text_file = os.path.join('data','temp.txt')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l163" name="l163">163</a></td><td><pre><span class="deletion">-	if os.path.isfile(text_file):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l164" name="l164">164</a></td><td><pre><span class="deletion">-		os.remove(text_file)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l165" name="l165">165</a></td><td><pre><span class="deletion">-	urllib.request.urlretrieve(url, text_file)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l166" name="l166">166</a></td><td><pre><span class="deletion">-	data = open(text_file)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l167" name="l167">167</a></td><td><pre><span class="deletion">-	inCurColourSpec = ''</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l168" name="l168">168</a></td><td><pre><span class="deletion">-	inCurRow = -1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l169" name="l169">169</a></td><td><pre><span class="deletion">-	inLine = data.readline()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l170" name="l170">170</a></td><td><pre><span class="deletion">-	inSize = [0, 0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l171" name="l171">171</a></td><td><pre><span class="deletion">-	inMaxCols = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l172" name="l172">172</a></td><td><pre><span class="deletion">-	outMap = []</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l173" name="l173">173</a></td><td><pre><span class="deletion">-	while inLine:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l174" name="l174">174</a></td><td><pre><span class="deletion">-		inCellState = 0x00</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l175" name="l175">175</a></td><td><pre><span class="deletion">-		inParseState = 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l176" name="l176">176</a></td><td><pre><span class="deletion">-		inCurCol = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l177" name="l177">177</a></td><td><pre><span class="deletion">-		inMaxCol = len(inLine)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l178" name="l178">178</a></td><td><pre><span class="deletion">-		inCurColourDigits = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l179" name="l179">179</a></td><td><pre><span class="deletion">-		inCurColours = (15, 1)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l180" name="l180">180</a></td><td><pre><span class="deletion">-		inCurColourSpec = ''</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l181" name="l181">181</a></td><td><pre><span class="deletion">-		inCurRow += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l182" name="l182">182</a></td><td><pre><span class="deletion">-		outMap.append([])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l183" name="l183">183</a></td><td><pre><span class="deletion">-		inRowCols = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l184" name="l184">184</a></td><td><pre><span class="deletion">-		inSize[1] += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l185" name="l185">185</a></td><td><pre><span class="deletion">-		while inCurCol &lt; inMaxCol:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l186" name="l186">186</a></td><td><pre><span class="deletion">-			inChar = inLine[inCurCol]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l187" name="l187">187</a></td><td><pre><span class="deletion">-			if inChar in set('\r\n'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l188" name="l188">188</a></td><td><pre><span class="deletion">-				inCurCol += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l189" name="l189">189</a></td><td><pre><span class="deletion">-			elif inParseState == 1:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l190" name="l190">190</a></td><td><pre><span class="deletion">-				inCurCol += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l191" name="l191">191</a></td><td><pre><span class="deletion">-				if inChar == '':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l192" name="l192">192</a></td><td><pre><span class="deletion">-					inCellState = flip_cell_state(inCellState, 0x01)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l193" name="l193">193</a></td><td><pre><span class="deletion">-				elif inChar == '':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l194" name="l194">194</a></td><td><pre><span class="deletion">-					inParseState = 2</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l195" name="l195">195</a></td><td><pre><span class="deletion">-				elif inChar == '':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l196" name="l196">196</a></td><td><pre><span class="deletion">-					inCellState = flip_cell_state(inCellState, 0x02)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l197" name="l197">197</a></td><td><pre><span class="deletion">-				elif inChar == '':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l198" name="l198">198</a></td><td><pre><span class="deletion">-					inCellState |= 0x00</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l199" name="l199">199</a></td><td><pre><span class="deletion">-					inCurColours = (15, 1)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l200" name="l200">200</a></td><td><pre><span class="deletion">-				elif inChar == '':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l201" name="l201">201</a></td><td><pre><span class="deletion">-					inCurColours = (inCurColours[1], inCurColours[0])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l202" name="l202">202</a></td><td><pre><span class="deletion">-				elif inChar == '':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l203" name="l203">203</a></td><td><pre><span class="deletion">-					inCellState = flip_cell_state(inCellState, 0x04)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l204" name="l204">204</a></td><td><pre><span class="deletion">-				else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l205" name="l205">205</a></td><td><pre><span class="deletion">-					inRowCols += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l206" name="l206">206</a></td><td><pre><span class="deletion">-					outMap[inCurRow].append([*inCurColours, inCellState, inChar])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l207" name="l207">207</a></td><td><pre><span class="deletion">-			elif inParseState == 2 or inParseState == 3:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l208" name="l208">208</a></td><td><pre><span class="deletion">-				if inChar == ',' and inParseState == 2:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l209" name="l209">209</a></td><td><pre><span class="deletion">-					if (inCurCol + 1) &lt; inMaxCol and not inLine[inCurCol + 1] in set('0123456789'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l210" name="l210">210</a></td><td><pre><span class="deletion">-						inCurColours = parse_char(inCurColourSpec, inCurColours)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l211" name="l211">211</a></td><td><pre><span class="deletion">-						inCurColourDigits = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l212" name="l212">212</a></td><td><pre><span class="deletion">-						inCurColourSpec = ''</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l213" name="l213">213</a></td><td><pre><span class="deletion">-						inParseState = 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l214" name="l214">214</a></td><td><pre><span class="deletion">-					else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l215" name="l215">215</a></td><td><pre><span class="deletion">-						inCurCol += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l216" name="l216">216</a></td><td><pre><span class="deletion">-						inCurColourDigits = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l217" name="l217">217</a></td><td><pre><span class="deletion">-						inCurColourSpec += inChar</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l218" name="l218">218</a></td><td><pre><span class="deletion">-						inParseState = 3</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l219" name="l219">219</a></td><td><pre><span class="deletion">-				elif inChar in set('0123456789') and inCurColourDigits == 0:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l220" name="l220">220</a></td><td><pre><span class="deletion">-					inCurCol += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l221" name="l221">221</a></td><td><pre><span class="deletion">-					inCurColourDigits += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l222" name="l222">222</a></td><td><pre><span class="deletion">-					inCurColourSpec += inChar</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l223" name="l223">223</a></td><td><pre><span class="deletion">-				elif inChar in set('0123456789') and inCurColourDigits == 1 and inCurColourSpec[-1] == '0':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l224" name="l224">224</a></td><td><pre><span class="deletion">-					inCurCol += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l225" name="l225">225</a></td><td><pre><span class="deletion">-					inCurColourDigits += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l226" name="l226">226</a></td><td><pre><span class="deletion">-					inCurColourSpec += inChar</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l227" name="l227">227</a></td><td><pre><span class="deletion">-				elif inChar in set('012345') and inCurColourDigits == 1 and inCurColourSpec[-1] == '1':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l228" name="l228">228</a></td><td><pre><span class="deletion">-					inCurCol += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l229" name="l229">229</a></td><td><pre><span class="deletion">-					inCurColourDigits += 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l230" name="l230">230</a></td><td><pre><span class="deletion">-					inCurColourSpec += inChar</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l231" name="l231">231</a></td><td><pre><span class="deletion">-				else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l232" name="l232">232</a></td><td><pre><span class="deletion">-					inCurColours = parse_char(inCurColourSpec, inCurColours)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l233" name="l233">233</a></td><td><pre><span class="deletion">-					inCurColourDigits = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l234" name="l234">234</a></td><td><pre><span class="deletion">-					inCurColourSpec = ''</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l235" name="l235">235</a></td><td><pre><span class="deletion">-					inParseState = 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l236" name="l236">236</a></td><td><pre><span class="deletion">-		inMaxCols = max(inMaxCols, inRowCols)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l237" name="l237">237</a></td><td><pre><span class="deletion">-		inLine = data.readline()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l238" name="l238">238</a></td><td><pre><span class="deletion">-	inSize[0] = inMaxCols</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l239" name="l239">239</a></td><td><pre><span class="deletion">-	canvas_data = outMap</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l240" name="l240">240</a></td><td><pre><span class="deletion">-	numRowCols = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l241" name="l241">241</a></td><td><pre><span class="deletion">-	for numRow in range(len(outMap)):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l242" name="l242">242</a></td><td><pre><span class="deletion">-		numRowCols = max(numRowCols, len(outMap[numRow]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l243" name="l243">243</a></td><td><pre><span class="deletion">-	for numRow in range(len(outMap)):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l244" name="l244">244</a></td><td><pre><span class="deletion">-		if len(outMap[numRow]) != numRowCols:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l245" name="l245">245</a></td><td><pre><span class="deletion">-			for numColOff in range(numRowCols - len(outMap[numRow])):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l246" name="l246">246</a></td><td><pre><span class="deletion">-				outMap[numRow].append([1,1,0,' '])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l247" name="l247">247</a></td><td><pre><span class="deletion">-		outMap[numRow].insert(0,[1,1,0,' '])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l248" name="l248">248</a></td><td><pre><span class="deletion">-		outMap[numRow].append([1,1,0,' '])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l249" name="l249">249</a></td><td><pre><span class="deletion">-	outMap.insert(0,[[1,1,0,' ']] * len(outMap[0]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l250" name="l250">250</a></td><td><pre><span class="deletion">-	outMap.append([[1,1,0,' ']] * len(outMap[0]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l251" name="l251">251</a></td><td><pre><span class="deletion">-	inCanvasMap = outMap</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l252" name="l252">252</a></td><td><pre><span class="deletion">-	outImgFont = ImageFont.truetype(os.path.join('data','DejaVuSansMono.ttf'), 11)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l253" name="l253">253</a></td><td><pre><span class="deletion">-	outImgFontSize = [*outImgFont.getsize(' ')]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l254" name="l254">254</a></td><td><pre><span class="deletion">-	outImgFontSize[1] += 3</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l255" name="l255">255</a></td><td><pre><span class="deletion">-	ColorsBold   = [[255,255,255],[85,85,85],[85,85,255],[85,255,85],[255,85,85],[255,85,85],[255,85,255],[255,255,85],[255,255,85],[85,255,85],[85,255,255],[85,255,255],[85,85,255],[255,85,255],[85,85,85],[255,255,255]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l256" name="l256">256</a></td><td><pre><span class="deletion">-	ColorsNormal = [[255,255,255],[0,0,0],[0,0,187],[0,187,0],[255,85,85],[187,0,0],[187,0,187],[187,187,0],[255,255,85],[85,255,85],[0,187,187],[85,255,255],[85,85,255],[255,85,255],[85,85,85],[187,187,187]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l257" name="l257">257</a></td><td><pre><span class="deletion">-	inSize = (len(inCanvasMap[0]), len(inCanvasMap))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l258" name="l258">258</a></td><td><pre><span class="deletion">-	outSize = [a*b for a,b in zip(inSize, outImgFontSize)]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l259" name="l259">259</a></td><td><pre><span class="deletion">-	outCurPos = [0, 0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l260" name="l260">260</a></td><td><pre><span class="deletion">-	outImg = Image.new('RGBA', outSize, (*ColorsNormal[1], 255))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l261" name="l261">261</a></td><td><pre><span class="deletion">-	outImgDraw = ImageDraw.Draw(outImg)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l262" name="l262">262</a></td><td><pre><span class="deletion">-	for inCurRow in range(len(inCanvasMap)):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l263" name="l263">263</a></td><td><pre><span class="deletion">-		for inCurCol in range(len(inCanvasMap[inCurRow])):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l264" name="l264">264</a></td><td><pre><span class="deletion">-			inCurCell = inCanvasMap[inCurRow][inCurCol]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l265" name="l265">265</a></td><td><pre><span class="deletion">-			outColours = [0, 0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l266" name="l266">266</a></td><td><pre><span class="deletion">-			if inCurCell[2] &amp; 0x01:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l267" name="l267">267</a></td><td><pre><span class="deletion">-				if inCurCell[3] != ' ':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l268" name="l268">268</a></td><td><pre><span class="deletion">-					if inCurCell[3] == '█':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l269" name="l269">269</a></td><td><pre><span class="deletion">-						outColours[1] = ColorsNormal[inCurCell[0]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l270" name="l270">270</a></td><td><pre><span class="deletion">-					else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l271" name="l271">271</a></td><td><pre><span class="deletion">-						outColours[0] = ColorsBold[inCurCell[0]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l272" name="l272">272</a></td><td><pre><span class="deletion">-						outColours[1] = ColorsNormal[inCurCell[1]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l273" name="l273">273</a></td><td><pre><span class="deletion">-				else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l274" name="l274">274</a></td><td><pre><span class="deletion">-					outColours[1] = ColorsNormal[inCurCell[1]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l275" name="l275">275</a></td><td><pre><span class="deletion">-			else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l276" name="l276">276</a></td><td><pre><span class="deletion">-				if inCurCell[3] != ' ':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l277" name="l277">277</a></td><td><pre><span class="deletion">-					if inCurCell[3] == '█':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l278" name="l278">278</a></td><td><pre><span class="deletion">-						outColours[1] = ColorsNormal[inCurCell[0]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l279" name="l279">279</a></td><td><pre><span class="deletion">-					else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l280" name="l280">280</a></td><td><pre><span class="deletion">-						outColours[0] = ColorsNormal[inCurCell[0]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l281" name="l281">281</a></td><td><pre><span class="deletion">-						outColours[1] = ColorsNormal[inCurCell[1]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l282" name="l282">282</a></td><td><pre><span class="deletion">-				else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l283" name="l283">283</a></td><td><pre><span class="deletion">-					outColours[1] = ColorsNormal[inCurCell[1]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l284" name="l284">284</a></td><td><pre><span class="deletion">-			outImgDraw.rectangle((*outCurPos,outCurPos[0] + outImgFontSize[0], outCurPos[1] + outImgFontSize[1]), fill=(*outColours[1], 255))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l285" name="l285">285</a></td><td><pre><span class="deletion">-			if  not inCurCell[3] in ' █' and outColours[0] != outColours[1]:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l286" name="l286">286</a></td><td><pre><span class="deletion">-				outImgDraw.text(outCurPos,inCurCell[3], (*outColours[0], 255), outImgFont)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l287" name="l287">287</a></td><td><pre><span class="deletion">-			if inCurCell[2] &amp; 0x04:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l288" name="l288">288</a></td><td><pre><span class="deletion">-				outColours[0] = ColorsNormal[inCurCell[0]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l289" name="l289">289</a></td><td><pre><span class="deletion">-				outImgDraw.line(xy=(outCurPos[0], outCurPos[1] + (outImgFontSize[1] - 2), outCurPos[0] + outImgFontSize[0], outCurPos[1] + (outImgFontSize[1] - 2)), fill=(*outColours[0], 255))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l290" name="l290">290</a></td><td><pre><span class="deletion">-			outCurPos[0] += outImgFontSize[0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l291" name="l291">291</a></td><td><pre><span class="deletion">-		outCurPos[0] = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l292" name="l292">292</a></td><td><pre><span class="deletion">-		outCurPos[1] += outImgFontSize[1]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l293" name="l293">293</a></td><td><pre><span class="deletion">-	out_file = os.path.join('data','temp.png')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l294" name="l294">294</a></td><td><pre><span class="deletion">-	if os.path.isfile(out_file):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l295" name="l295">295</a></td><td><pre><span class="deletion">-		os.remove(out_file)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l296" name="l296">296</a></td><td><pre><span class="deletion">-	outImg.save(out_file)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l297" name="l297">297</a></td><td><pre><span class="bold">diff --git a/scroll/core/config.py b/scroll/core/config.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l298" name="l298">298</a></td><td><pre><span class="bold">index 61fbf6a..93f274e 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l299" name="l299">299</a></td><td><pre><span class="bold">--- a/scroll/core/config.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l300" name="l300">300</a></td><td><pre><span class="bold">+++ b/scroll/core/config.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l301" name="l301">301</a></td><td><pre><span class="hunk">@@ -5,17 +5,14 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l302" name="l302">302</a></td><td><pre> class connection:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l303" name="l303">303</a></td><td><pre> 	server     = 'irc.server.com'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l304" name="l304">304</a></td><td><pre> 	port       = 6667</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l305" name="l305">305</a></td><td><pre><span class="deletion">-	proxy      = None # Must be in IP:PORT format (Socks5 proxies only)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l306" name="l306">306</a></td><td><pre> 	ipv6       = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l307" name="l307">307</a></td><td><pre> 	ssl        = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l308" name="l308">308</a></td><td><pre><span class="deletion">-	ssl_verify = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l309" name="l309">309</a></td><td><pre> 	vhost      = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l310" name="l310">310</a></td><td><pre> 	channel    = '#chats'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l311" name="l311">311</a></td><td><pre> 	key        = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l312" name="l312">312</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l313" name="l313">313</a></td><td><pre> class cert:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l314" name="l314">314</a></td><td><pre> 	key      = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l315" name="l315">315</a></td><td><pre><span class="deletion">-	file     = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l316" name="l316">316</a></td><td><pre> 	password = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l317" name="l317">317</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l318" name="l318">318</a></td><td><pre> class ident:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l319" name="l319">319</a></td><td><pre><span class="hunk">@@ -24,13 +21,9 @@</span> </span>class ident:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l320" name="l320">320</a></td><td><pre> 	realname = 'acid.vegas/scroll'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l321" name="l321">321</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l322" name="l322">322</a></td><td><pre> class login:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l323" name="l323">323</a></td><td><pre><span class="deletion">-	network  = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l324" name="l324">324</a></td><td><pre> 	nickserv = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l325" name="l325">325</a></td><td><pre> 	operator = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l326" name="l326">326</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l327" name="l327">327</a></td><td><pre> class settings:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l328" name="l328">328</a></td><td><pre> 	admin = 'nick!user@host' # Must be in nick!user@host format (Wildcards accepted)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l329" name="l329">329</a></td><td><pre><span class="deletion">-	log   = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l330" name="l330">330</a></td><td><pre><span class="deletion">-	modes = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l331" name="l331">331</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l332" name="l332">332</a></td><td><pre><span class="deletion">-IMGUR_API_KEY = 'CHANGEME' # https://apidocs.imgur.com/</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l333" name="l333">333</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">modes = None</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l334" name="l334">334</a></td><td><pre><span class="bold">diff --git a/scroll/core/constants.py b/scroll/core/constants.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l335" name="l335">335</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l336" name="l336">336</a></td><td><pre><span class="bold">index 109eb9a..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l337" name="l337">337</a></td><td><pre><span class="bold">--- a/scroll/core/constants.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l338" name="l338">338</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l339" name="l339">339</a></td><td><pre><span class="hunk">@@ -1,229 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l340" name="l340">340</a></td><td><pre><span class="deletion">-#!/usr/bin/env python</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l341" name="l341">341</a></td><td><pre><span class="deletion">-# Scroll IRC Art Bot - Developed by acidvegas in Python (https://acid.vegas/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l342" name="l342">342</a></td><td><pre><span class="deletion">-# constants.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l343" name="l343">343</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l344" name="l344">344</a></td><td><pre><span class="deletion">-# Control Characters</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l345" name="l345">345</a></td><td><pre><span class="deletion">-bold      = '\x02'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l346" name="l346">346</a></td><td><pre><span class="deletion">-color     = '\x03'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l347" name="l347">347</a></td><td><pre><span class="deletion">-italic    = '\x1D'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l348" name="l348">348</a></td><td><pre><span class="deletion">-underline = '\x1F'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l349" name="l349">349</a></td><td><pre><span class="deletion">-reverse   = '\x16'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l350" name="l350">350</a></td><td><pre><span class="deletion">-reset     = '\x0f'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l351" name="l351">351</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l352" name="l352">352</a></td><td><pre><span class="deletion">-# Color Codes</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l353" name="l353">353</a></td><td><pre><span class="deletion">-white       = '00'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l354" name="l354">354</a></td><td><pre><span class="deletion">-black       = '01'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l355" name="l355">355</a></td><td><pre><span class="deletion">-blue        = '02'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l356" name="l356">356</a></td><td><pre><span class="deletion">-green       = '03'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l357" name="l357">357</a></td><td><pre><span class="deletion">-red         = '04'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l358" name="l358">358</a></td><td><pre><span class="deletion">-brown       = '05'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l359" name="l359">359</a></td><td><pre><span class="deletion">-purple      = '06'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l360" name="l360">360</a></td><td><pre><span class="deletion">-orange      = '07'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l361" name="l361">361</a></td><td><pre><span class="deletion">-yellow      = '08'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l362" name="l362">362</a></td><td><pre><span class="deletion">-light_green = '09'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l363" name="l363">363</a></td><td><pre><span class="deletion">-cyan        = '10'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l364" name="l364">364</a></td><td><pre><span class="deletion">-light_cyan  = '11'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l365" name="l365">365</a></td><td><pre><span class="deletion">-light_blue  = '12'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l366" name="l366">366</a></td><td><pre><span class="deletion">-pink        = '13'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l367" name="l367">367</a></td><td><pre><span class="deletion">-grey        = '14'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l368" name="l368">368</a></td><td><pre><span class="deletion">-light_grey  = '15'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l369" name="l369">369</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l370" name="l370">370</a></td><td><pre><span class="deletion">-# Events</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l371" name="l371">371</a></td><td><pre><span class="deletion">-PASS     = 'PASS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l372" name="l372">372</a></td><td><pre><span class="deletion">-NICK     = 'NICK'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l373" name="l373">373</a></td><td><pre><span class="deletion">-USER     = 'USER'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l374" name="l374">374</a></td><td><pre><span class="deletion">-OPER     = 'OPER'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l375" name="l375">375</a></td><td><pre><span class="deletion">-MODE     = 'MODE'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l376" name="l376">376</a></td><td><pre><span class="deletion">-SERVICE  = 'SERVICE'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l377" name="l377">377</a></td><td><pre><span class="deletion">-QUIT     = 'QUIT'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l378" name="l378">378</a></td><td><pre><span class="deletion">-SQUIT    = 'SQUIT'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l379" name="l379">379</a></td><td><pre><span class="deletion">-JOIN     = 'JOIN'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l380" name="l380">380</a></td><td><pre><span class="deletion">-PART     = 'PART'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l381" name="l381">381</a></td><td><pre><span class="deletion">-TOPIC    = 'TOPIC'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l382" name="l382">382</a></td><td><pre><span class="deletion">-NAMES    = 'NAMES'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l383" name="l383">383</a></td><td><pre><span class="deletion">-LIST     = 'LIST'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l384" name="l384">384</a></td><td><pre><span class="deletion">-INVITE   = 'INVITE'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l385" name="l385">385</a></td><td><pre><span class="deletion">-KICK     = 'KICK'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l386" name="l386">386</a></td><td><pre><span class="deletion">-PRIVMSG  = 'PRIVMSG'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l387" name="l387">387</a></td><td><pre><span class="deletion">-NOTICE   = 'NOTICE'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l388" name="l388">388</a></td><td><pre><span class="deletion">-MOTD     = 'MOTD'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l389" name="l389">389</a></td><td><pre><span class="deletion">-LUSERS   = 'LUSERS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l390" name="l390">390</a></td><td><pre><span class="deletion">-VERSION  = 'VERSION'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l391" name="l391">391</a></td><td><pre><span class="deletion">-STATS    = 'STATS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l392" name="l392">392</a></td><td><pre><span class="deletion">-LINKS    = 'LINKS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l393" name="l393">393</a></td><td><pre><span class="deletion">-TIME     = 'TIME'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l394" name="l394">394</a></td><td><pre><span class="deletion">-CONNECT  = 'CONNECT'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l395" name="l395">395</a></td><td><pre><span class="deletion">-TRACE    = 'TRACE'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l396" name="l396">396</a></td><td><pre><span class="deletion">-ADMIN    = 'ADMIN'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l397" name="l397">397</a></td><td><pre><span class="deletion">-INFO     = 'INFO'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l398" name="l398">398</a></td><td><pre><span class="deletion">-SERVLIST = 'SERVLIST'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l399" name="l399">399</a></td><td><pre><span class="deletion">-SQUERY   = 'SQUERY'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l400" name="l400">400</a></td><td><pre><span class="deletion">-WHO      = 'WHO'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l401" name="l401">401</a></td><td><pre><span class="deletion">-WHOIS    = 'WHOIS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l402" name="l402">402</a></td><td><pre><span class="deletion">-WHOWAS   = 'WHOWAS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l403" name="l403">403</a></td><td><pre><span class="deletion">-KILL     = 'KILL'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l404" name="l404">404</a></td><td><pre><span class="deletion">-PING     = 'PING'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l405" name="l405">405</a></td><td><pre><span class="deletion">-PONG     = 'PONG'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l406" name="l406">406</a></td><td><pre><span class="deletion">-ERROR    = 'ERROR'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l407" name="l407">407</a></td><td><pre><span class="deletion">-AWAY     = 'AWAY'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l408" name="l408">408</a></td><td><pre><span class="deletion">-REHASH   = 'REHASH'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l409" name="l409">409</a></td><td><pre><span class="deletion">-DIE      = 'DIE'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l410" name="l410">410</a></td><td><pre><span class="deletion">-RESTART  = 'RESTART'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l411" name="l411">411</a></td><td><pre><span class="deletion">-SUMMON   = 'SUMMON'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l412" name="l412">412</a></td><td><pre><span class="deletion">-USERS    = 'USERS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l413" name="l413">413</a></td><td><pre><span class="deletion">-WALLOPS  = 'WALLOPS'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l414" name="l414">414</a></td><td><pre><span class="deletion">-USERHOST = 'USERHOST'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l415" name="l415">415</a></td><td><pre><span class="deletion">-ISON     = 'ISON'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l416" name="l416">416</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l417" name="l417">417</a></td><td><pre><span class="deletion">-# Event Numerics</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l418" name="l418">418</a></td><td><pre><span class="deletion">-RPL_WELCOME          = '001'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l419" name="l419">419</a></td><td><pre><span class="deletion">-RPL_YOURHOST         = '002'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l420" name="l420">420</a></td><td><pre><span class="deletion">-RPL_CREATED          = '003'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l421" name="l421">421</a></td><td><pre><span class="deletion">-RPL_MYINFO           = '004'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l422" name="l422">422</a></td><td><pre><span class="deletion">-RPL_ISUPPORT         = '005'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l423" name="l423">423</a></td><td><pre><span class="deletion">-RPL_TRACELINK        = '200'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l424" name="l424">424</a></td><td><pre><span class="deletion">-RPL_TRACECONNECTING  = '201'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l425" name="l425">425</a></td><td><pre><span class="deletion">-RPL_TRACEHANDSHAKE   = '202'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l426" name="l426">426</a></td><td><pre><span class="deletion">-RPL_TRACEUNKNOWN     = '203'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l427" name="l427">427</a></td><td><pre><span class="deletion">-RPL_TRACEOPERATOR    = '204'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l428" name="l428">428</a></td><td><pre><span class="deletion">-RPL_TRACEUSER        = '205'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l429" name="l429">429</a></td><td><pre><span class="deletion">-RPL_TRACESERVER      = '206'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l430" name="l430">430</a></td><td><pre><span class="deletion">-RPL_TRACESERVICE     = '207'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l431" name="l431">431</a></td><td><pre><span class="deletion">-RPL_TRACENEWTYPE     = '208'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l432" name="l432">432</a></td><td><pre><span class="deletion">-RPL_TRACECLASS       = '209'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l433" name="l433">433</a></td><td><pre><span class="deletion">-RPL_STATSLINKINFO    = '211'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l434" name="l434">434</a></td><td><pre><span class="deletion">-RPL_STATSCOMMANDS    = '212'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l435" name="l435">435</a></td><td><pre><span class="deletion">-RPL_STATSCLINE       = '213'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l436" name="l436">436</a></td><td><pre><span class="deletion">-RPL_STATSILINE       = '215'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l437" name="l437">437</a></td><td><pre><span class="deletion">-RPL_STATSKLINE       = '216'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l438" name="l438">438</a></td><td><pre><span class="deletion">-RPL_STATSYLINE       = '218'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l439" name="l439">439</a></td><td><pre><span class="deletion">-RPL_ENDOFSTATS       = '219'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l440" name="l440">440</a></td><td><pre><span class="deletion">-RPL_UMODEIS          = '221'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l441" name="l441">441</a></td><td><pre><span class="deletion">-RPL_SERVLIST         = '234'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l442" name="l442">442</a></td><td><pre><span class="deletion">-RPL_SERVLISTEND      = '235'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l443" name="l443">443</a></td><td><pre><span class="deletion">-RPL_STATSLLINE       = '241'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l444" name="l444">444</a></td><td><pre><span class="deletion">-RPL_STATSUPTIME      = '242'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l445" name="l445">445</a></td><td><pre><span class="deletion">-RPL_STATSOLINE       = '243'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l446" name="l446">446</a></td><td><pre><span class="deletion">-RPL_STATSHLINE       = '244'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l447" name="l447">447</a></td><td><pre><span class="deletion">-RPL_LUSERCLIENT      = '251'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l448" name="l448">448</a></td><td><pre><span class="deletion">-RPL_LUSEROP          = '252'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l449" name="l449">449</a></td><td><pre><span class="deletion">-RPL_LUSERUNKNOWN     = '253'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l450" name="l450">450</a></td><td><pre><span class="deletion">-RPL_LUSERCHANNELS    = '254'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l451" name="l451">451</a></td><td><pre><span class="deletion">-RPL_LUSERME          = '255'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l452" name="l452">452</a></td><td><pre><span class="deletion">-RPL_ADMINME          = '256'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l453" name="l453">453</a></td><td><pre><span class="deletion">-RPL_ADMINLOC1        = '257'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l454" name="l454">454</a></td><td><pre><span class="deletion">-RPL_ADMINLOC2        = '258'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l455" name="l455">455</a></td><td><pre><span class="deletion">-RPL_ADMINEMAIL       = '259'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l456" name="l456">456</a></td><td><pre><span class="deletion">-RPL_TRACELOG         = '261'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l457" name="l457">457</a></td><td><pre><span class="deletion">-RPL_TRYAGAIN         = '263'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l458" name="l458">458</a></td><td><pre><span class="deletion">-RPL_NONE             = '300'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l459" name="l459">459</a></td><td><pre><span class="deletion">-RPL_AWAY             = '301'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l460" name="l460">460</a></td><td><pre><span class="deletion">-RPL_USERHOST         = '302'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l461" name="l461">461</a></td><td><pre><span class="deletion">-RPL_ISON             = '303'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l462" name="l462">462</a></td><td><pre><span class="deletion">-RPL_UNAWAY           = '305'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l463" name="l463">463</a></td><td><pre><span class="deletion">-RPL_NOWAWAY          = '306'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l464" name="l464">464</a></td><td><pre><span class="deletion">-RPL_WHOISUSER        = '311'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l465" name="l465">465</a></td><td><pre><span class="deletion">-RPL_WHOISSERVER      = '312'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l466" name="l466">466</a></td><td><pre><span class="deletion">-RPL_WHOISOPERATOR    = '313'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l467" name="l467">467</a></td><td><pre><span class="deletion">-RPL_WHOWASUSER       = '314'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l468" name="l468">468</a></td><td><pre><span class="deletion">-RPL_ENDOFWHO         = '315'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l469" name="l469">469</a></td><td><pre><span class="deletion">-RPL_WHOISIDLE        = '317'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l470" name="l470">470</a></td><td><pre><span class="deletion">-RPL_ENDOFWHOIS       = '318'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l471" name="l471">471</a></td><td><pre><span class="deletion">-RPL_WHOISCHANNELS    = '319'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l472" name="l472">472</a></td><td><pre><span class="deletion">-RPL_LIST             = '322'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l473" name="l473">473</a></td><td><pre><span class="deletion">-RPL_LISTEND          = '323'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l474" name="l474">474</a></td><td><pre><span class="deletion">-RPL_CHANNELMODEIS    = '324'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l475" name="l475">475</a></td><td><pre><span class="deletion">-RPL_NOTOPIC          = '331'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l476" name="l476">476</a></td><td><pre><span class="deletion">-RPL_TOPIC            = '332'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l477" name="l477">477</a></td><td><pre><span class="deletion">-RPL_INVITING         = '341'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l478" name="l478">478</a></td><td><pre><span class="deletion">-RPL_INVITELIST       = '346'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l479" name="l479">479</a></td><td><pre><span class="deletion">-RPL_ENDOFINVITELIST  = '347'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l480" name="l480">480</a></td><td><pre><span class="deletion">-RPL_EXCEPTLIST       = '348'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l481" name="l481">481</a></td><td><pre><span class="deletion">-RPL_ENDOFEXCEPTLIST  = '349'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l482" name="l482">482</a></td><td><pre><span class="deletion">-RPL_VERSION          = '351'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l483" name="l483">483</a></td><td><pre><span class="deletion">-RPL_WHOREPLY         = '352'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l484" name="l484">484</a></td><td><pre><span class="deletion">-RPL_NAMREPLY         = '353'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l485" name="l485">485</a></td><td><pre><span class="deletion">-RPL_LINKS            = '364'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l486" name="l486">486</a></td><td><pre><span class="deletion">-RPL_ENDOFLINKS       = '365'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l487" name="l487">487</a></td><td><pre><span class="deletion">-RPL_ENDOFNAMES       = '366'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l488" name="l488">488</a></td><td><pre><span class="deletion">-RPL_BANLIST          = '367'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l489" name="l489">489</a></td><td><pre><span class="deletion">-RPL_ENDOFBANLIST     = '368'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l490" name="l490">490</a></td><td><pre><span class="deletion">-RPL_ENDOFWHOWAS      = '369'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l491" name="l491">491</a></td><td><pre><span class="deletion">-RPL_INFO             = '371'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l492" name="l492">492</a></td><td><pre><span class="deletion">-RPL_MOTD             = '372'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l493" name="l493">493</a></td><td><pre><span class="deletion">-RPL_ENDOFINFO        = '374'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l494" name="l494">494</a></td><td><pre><span class="deletion">-RPL_MOTDSTART        = '375'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l495" name="l495">495</a></td><td><pre><span class="deletion">-RPL_ENDOFMOTD        = '376'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l496" name="l496">496</a></td><td><pre><span class="deletion">-RPL_YOUREOPER        = '381'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l497" name="l497">497</a></td><td><pre><span class="deletion">-RPL_REHASHING        = '382'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l498" name="l498">498</a></td><td><pre><span class="deletion">-RPL_YOURESERVICE     = '383'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l499" name="l499">499</a></td><td><pre><span class="deletion">-RPL_TIME             = '391'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l500" name="l500">500</a></td><td><pre><span class="deletion">-RPL_USERSSTART       = '392'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l501" name="l501">501</a></td><td><pre><span class="deletion">-RPL_USERS            = '393'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l502" name="l502">502</a></td><td><pre><span class="deletion">-RPL_ENDOFUSERS       = '394'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l503" name="l503">503</a></td><td><pre><span class="deletion">-RPL_NOUSERS          = '395'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l504" name="l504">504</a></td><td><pre><span class="deletion">-ERR_NOSUCHNICK       = '401'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l505" name="l505">505</a></td><td><pre><span class="deletion">-ERR_NOSUCHSERVER     = '402'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l506" name="l506">506</a></td><td><pre><span class="deletion">-ERR_NOSUCHCHANNEL    = '403'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l507" name="l507">507</a></td><td><pre><span class="deletion">-ERR_CANNOTSENDTOCHAN = '404'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l508" name="l508">508</a></td><td><pre><span class="deletion">-ERR_TOOMANYCHANNELS  = '405'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l509" name="l509">509</a></td><td><pre><span class="deletion">-ERR_WASNOSUCHNICK    = '406'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l510" name="l510">510</a></td><td><pre><span class="deletion">-ERR_TOOMANYTARGETS   = '407'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l511" name="l511">511</a></td><td><pre><span class="deletion">-ERR_NOSUCHSERVICE    = '408'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l512" name="l512">512</a></td><td><pre><span class="deletion">-ERR_NOORIGIN         = '409'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l513" name="l513">513</a></td><td><pre><span class="deletion">-ERR_NORECIPIENT      = '411'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l514" name="l514">514</a></td><td><pre><span class="deletion">-ERR_NOTEXTTOSEND     = '412'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l515" name="l515">515</a></td><td><pre><span class="deletion">-ERR_NOTOPLEVEL       = '413'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l516" name="l516">516</a></td><td><pre><span class="deletion">-ERR_WILDTOPLEVEL     = '414'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l517" name="l517">517</a></td><td><pre><span class="deletion">-ERR_BADMASK          = '415'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l518" name="l518">518</a></td><td><pre><span class="deletion">-ERR_UNKNOWNCOMMAND   = '421'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l519" name="l519">519</a></td><td><pre><span class="deletion">-ERR_NOMOTD           = '422'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l520" name="l520">520</a></td><td><pre><span class="deletion">-ERR_NOADMININFO      = '423'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l521" name="l521">521</a></td><td><pre><span class="deletion">-ERR_FILEERROR        = '424'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l522" name="l522">522</a></td><td><pre><span class="deletion">-ERR_NONICKNAMEGIVEN  = '431'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l523" name="l523">523</a></td><td><pre><span class="deletion">-ERR_ERRONEUSNICKNAME = '432'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l524" name="l524">524</a></td><td><pre><span class="deletion">-ERR_NICKNAMEINUSE    = '433'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l525" name="l525">525</a></td><td><pre><span class="deletion">-ERR_NICKCOLLISION    = '436'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l526" name="l526">526</a></td><td><pre><span class="deletion">-ERR_USERNOTINCHANNEL = '441'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l527" name="l527">527</a></td><td><pre><span class="deletion">-ERR_NOTONCHANNEL     = '442'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l528" name="l528">528</a></td><td><pre><span class="deletion">-ERR_USERONCHANNEL    = '443'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l529" name="l529">529</a></td><td><pre><span class="deletion">-ERR_NOLOGIN          = '444'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l530" name="l530">530</a></td><td><pre><span class="deletion">-ERR_SUMMONDISABLED   = '445'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l531" name="l531">531</a></td><td><pre><span class="deletion">-ERR_USERSDISABLED    = '446'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l532" name="l532">532</a></td><td><pre><span class="deletion">-ERR_NOTREGISTERED    = '451'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l533" name="l533">533</a></td><td><pre><span class="deletion">-ERR_NEEDMOREPARAMS   = '461'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l534" name="l534">534</a></td><td><pre><span class="deletion">-ERR_ALREADYREGISTRED = '462'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l535" name="l535">535</a></td><td><pre><span class="deletion">-ERR_NOPERMFORHOST    = '463'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l536" name="l536">536</a></td><td><pre><span class="deletion">-ERR_PASSWDMISMATCH   = '464'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l537" name="l537">537</a></td><td><pre><span class="deletion">-ERR_YOUREBANNEDCREEP = '465'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l538" name="l538">538</a></td><td><pre><span class="deletion">-ERR_KEYSET           = '467'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l539" name="l539">539</a></td><td><pre><span class="deletion">-ERR_CHANNELISFULL    = '471'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l540" name="l540">540</a></td><td><pre><span class="deletion">-ERR_UNKNOWNMODE      = '472'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l541" name="l541">541</a></td><td><pre><span class="deletion">-ERR_INVITEONLYCHAN   = '473'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l542" name="l542">542</a></td><td><pre><span class="deletion">-ERR_BANNEDFROMCHAN   = '474'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l543" name="l543">543</a></td><td><pre><span class="deletion">-ERR_BADCHANNELKEY    = '475'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l544" name="l544">544</a></td><td><pre><span class="deletion">-ERR_BADCHANMASK      = '476'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l545" name="l545">545</a></td><td><pre><span class="deletion">-ERR_BANLISTFULL      = '478'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l546" name="l546">546</a></td><td><pre><span class="deletion">-ERR_NOPRIVILEGES     = '481'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l547" name="l547">547</a></td><td><pre><span class="deletion">-ERR_CHANOPRIVSNEEDED = '482'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l548" name="l548">548</a></td><td><pre><span class="deletion">-ERR_CANTKILLSERVER   = '483'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l549" name="l549">549</a></td><td><pre><span class="deletion">-ERR_UNIQOPRIVSNEEDED = '485'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l550" name="l550">550</a></td><td><pre><span class="deletion">-ERR_NOOPERHOST       = '491'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l551" name="l551">551</a></td><td><pre><span class="deletion">-ERR_UMODEUNKNOWNFLAG = '501'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l552" name="l552">552</a></td><td><pre><span class="deletion">-ERR_USERSDONTMATCH   = '502'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l553" name="l553">553</a></td><td><pre><span class="deletion">-RPL_STARTTLS         = '670'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l554" name="l554">554</a></td><td><pre><span class="deletion">-ERR_STARTTLS         = '691'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l555" name="l555">555</a></td><td><pre><span class="deletion">-RPL_MONONLINE        = '730'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l556" name="l556">556</a></td><td><pre><span class="deletion">-RPL_MONOFFLINE       = '731'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l557" name="l557">557</a></td><td><pre><span class="deletion">-RPL_MONLIST          = '732'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l558" name="l558">558</a></td><td><pre><span class="deletion">-RPL_ENDOFMONLIST     = '733'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l559" name="l559">559</a></td><td><pre><span class="deletion">-ERR_MONLISTFULL      = '734'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l560" name="l560">560</a></td><td><pre><span class="deletion">-RPL_LOGGEDIN         = '900'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l561" name="l561">561</a></td><td><pre><span class="deletion">-RPL_LOGGEDOUT        = '901'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l562" name="l562">562</a></td><td><pre><span class="deletion">-ERR_NICKLOCKED       = '902'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l563" name="l563">563</a></td><td><pre><span class="deletion">-RPL_SASLSUCCESS      = '903'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l564" name="l564">564</a></td><td><pre><span class="deletion">-ERR_SASLFAIL         = '904'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l565" name="l565">565</a></td><td><pre><span class="deletion">-ERR_SASLTOOLONG      = '905'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l566" name="l566">566</a></td><td><pre><span class="deletion">-ERR_SASLABORTED      = '906'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l567" name="l567">567</a></td><td><pre><span class="deletion">-ERR_SASLALREADY      = '907'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l568" name="l568">568</a></td><td><pre><span class="deletion">-RPL_SASLMECHS        = '908'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l569" name="l569">569</a></td><td><pre><span class="bold">diff --git a/scroll/core/database.py b/scroll/core/database.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l570" name="l570">570</a></td><td><pre><span class="bold">index d302349..b9a020c 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l571" name="l571">571</a></td><td><pre><span class="bold">--- a/scroll/core/database.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l572" name="l572">572</a></td><td><pre><span class="bold">+++ b/scroll/core/database.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l573" name="l573">573</a></td><td><pre><span class="hunk">@@ -2,11 +2,10 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l574" name="l574">574</a></td><td><pre> # Scroll IRC Art Bot - Developed by acidvegas in Python (https://acid.vegas/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l575" name="l575">575</a></td><td><pre> # database.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l576" name="l576">576</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l577" name="l577">577</a></td><td><pre><span class="deletion">-import os</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l578" name="l578">578</a></td><td><pre> import re</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l579" name="l579">579</a></td><td><pre> import sqlite3</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l580" name="l580">580</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l581" name="l581">581</a></td><td><pre><span class="deletion">-db  = sqlite3.connect(os.path.join('data', 'scroll.db'), check_same_thread=False)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l582" name="l582">582</a></td><td><pre><span class="insertion">+</span><span class="insertion">db  = sqlite3.connect('scroll.db', check_same_thread=False)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l583" name="l583">583</a></td><td><pre> sql = db.cursor()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l584" name="l584">584</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l585" name="l585">585</a></td><td><pre> def check():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l586" name="l586">586</a></td><td><pre><span class="hunk">@@ -14,16 +13,11 @@</span> </span>def check():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l587" name="l587">587</a></td><td><pre> 	if not len(tables):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l588" name="l588">588</a></td><td><pre> 		sql.execute('CREATE TABLE IGNORE (IDENT TEXT NOT NULL);')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l589" name="l589">589</a></td><td><pre> 		sql.execute('CREATE TABLE SETTINGS (SETTING TEXT NOT NULL, VALUE TEXT NOT NULL);')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l590" name="l590">590</a></td><td><pre><span class="deletion">-		sql.execute('CREATE TABLE UPLOADS (NICK TEXT NOT NULL, URL TEXT NOT NULL, TITLE TEXT NOT NULL);')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l591" name="l591">591</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_lines',       '300'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l592" name="l592">592</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_png_bytes',   '2000000'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l593" name="l593">593</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_results',     '10'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l594" name="l594">594</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_uploads',     '25'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l595" name="l595">595</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_uploads_per', '5'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l596" name="l596">596</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('rnd_exclude',     'ansi,big,birds,hang,pokemon'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l597" name="l597">597</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('throttle_cmd',    '3'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l598" name="l598">598</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('throttle_msg',    '0.03'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l599" name="l599">599</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('throttle_png',    '0.03'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l600" name="l600">600</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_lines',    '300'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l601" name="l601">601</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('max_results',  '10'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l602" name="l602">602</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('rnd_exclude',  'ansi,big,birds,hang,pokemon'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l603" name="l603">603</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('throttle_cmd', '3'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l604" name="l604">604</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">sql.execute('INSERT INTO SETTINGS (SETTING,VALUE) VALUES (?,?)', ('throttle_msg', '0.03'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l605" name="l605">605</a></td><td><pre> 		db.commit()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l606" name="l606">606</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l607" name="l607">607</a></td><td><pre> class Ignore:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l608" name="l608">608</a></td><td><pre><span class="hunk">@@ -56,19 +50,4 @@</span> </span>class Settings:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l609" name="l609">609</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l610" name="l610">610</a></td><td><pre> 	def update(setting, value):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l611" name="l611">611</a></td><td><pre> 		sql.execute('UPDATE SETTINGS SET VALUE=? WHERE SETTING=?', (value, setting))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l612" name="l612">612</a></td><td><pre><span class="deletion">-		db.commit()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l613" name="l613">613</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l614" name="l614">614</a></td><td><pre><span class="deletion">-class Uploads:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l615" name="l615">615</a></td><td><pre><span class="deletion">-	def add(nick, url, title):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l616" name="l616">616</a></td><td><pre><span class="deletion">-		sql.execute('INSERT INTO UPLOADS (NICK,URL,TITLE) VALUES (?,?,?)', (nick,url,title))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l617" name="l617">617</a></td><td><pre><span class="deletion">-		db.commit()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l618" name="l618">618</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l619" name="l619">619</a></td><td><pre><span class="deletion">-	def read(nick=None):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l620" name="l620">620</a></td><td><pre><span class="deletion">-		if nick:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l621" name="l621">621</a></td><td><pre><span class="deletion">-			return sql.execute('SELECT NICK,URL,TITLE FROM UPLOADS WHERE NICK=?', (nick,)).fetchall()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l622" name="l622">622</a></td><td><pre><span class="deletion">-		else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l623" name="l623">623</a></td><td><pre><span class="deletion">-			return sql.execute('SELECT NICK,URL,TITLE FROM UPLOADS').fetchall()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l624" name="l624">624</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l625" name="l625">625</a></td><td><pre><span class="deletion">-	def remove(url):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l626" name="l626">626</a></td><td><pre><span class="deletion">-		sql.execute('DELETE FROM UPLOADS WHERE URL=?', (url,))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l627" name="l627">627</a></td><td><pre><span class="deletion">-		db.commit()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l628" name="l628">628</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">db.commit()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l629" name="l629">629</a></td><td><pre><span class="bold">diff --git a/scroll/core/debug.py b/scroll/core/debug.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l630" name="l630">630</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l631" name="l631">631</a></td><td><pre><span class="bold">index 2f43707..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l632" name="l632">632</a></td><td><pre><span class="bold">--- a/scroll/core/debug.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l633" name="l633">633</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l634" name="l634">634</a></td><td><pre><span class="hunk">@@ -1,55 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l635" name="l635">635</a></td><td><pre><span class="deletion">-#!/usr/bin/env python</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l636" name="l636">636</a></td><td><pre><span class="deletion">-# Scroll IRC Art Bot - Developed by acidvegas in Python (https://acid.vegas/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l637" name="l637">637</a></td><td><pre><span class="deletion">-# debug.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l638" name="l638">638</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l639" name="l639">639</a></td><td><pre><span class="deletion">-import ctypes</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l640" name="l640">640</a></td><td><pre><span class="deletion">-import logging</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l641" name="l641">641</a></td><td><pre><span class="deletion">-import os</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l642" name="l642">642</a></td><td><pre><span class="deletion">-import sys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l643" name="l643">643</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l644" name="l644">644</a></td><td><pre><span class="deletion">-from logging.handlers import RotatingFileHandler</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l645" name="l645">645</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l646" name="l646">646</a></td><td><pre><span class="deletion">-import config</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l647" name="l647">647</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l648" name="l648">648</a></td><td><pre><span class="deletion">-def check_privileges():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l649" name="l649">649</a></td><td><pre><span class="deletion">-	if check_windows():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l650" name="l650">650</a></td><td><pre><span class="deletion">-		return True if ctypes.windll.shell32.IsUserAnAdmin() else False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l651" name="l651">651</a></td><td><pre><span class="deletion">-	else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l652" name="l652">652</a></td><td><pre><span class="deletion">-		return True if os.getuid() == 0 or os.geteuid() == 0 else False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l653" name="l653">653</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l654" name="l654">654</a></td><td><pre><span class="deletion">-def check_version(major):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l655" name="l655">655</a></td><td><pre><span class="deletion">-	return True if sys.version_info.major == major else False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l656" name="l656">656</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l657" name="l657">657</a></td><td><pre><span class="deletion">-def check_windows():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l658" name="l658">658</a></td><td><pre><span class="deletion">-	return True if os.name == 'nt' else False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l659" name="l659">659</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l660" name="l660">660</a></td><td><pre><span class="deletion">-def clear():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l661" name="l661">661</a></td><td><pre><span class="deletion">-	os.system('cls') if check_windows() else os.system('clear')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l662" name="l662">662</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l663" name="l663">663</a></td><td><pre><span class="deletion">-def error(msg, reason=None):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l664" name="l664">664</a></td><td><pre><span class="deletion">-	logging.error(f'[!] - {msg} ({reason})') if reason else logging.error('[!] - ' + msg)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l665" name="l665">665</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l666" name="l666">666</a></td><td><pre><span class="deletion">-def error_exit(msg):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l667" name="l667">667</a></td><td><pre><span class="deletion">-	raise SystemExit('[!] - ' + msg)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l668" name="l668">668</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l669" name="l669">669</a></td><td><pre><span class="deletion">-def info():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l670" name="l670">670</a></td><td><pre><span class="deletion">-	clear()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l671" name="l671">671</a></td><td><pre><span class="deletion">-	print('#'*56)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l672" name="l672">672</a></td><td><pre><span class="deletion">-	print('#{0}#'.format(''.center(54)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l673" name="l673">673</a></td><td><pre><span class="deletion">-	print('#{0}#'.format('Scroll IRC Art Bot'.center(54)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l674" name="l674">674</a></td><td><pre><span class="deletion">-	print('#{0}#'.format('Developed by acidvegas in Python'.center(54)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l675" name="l675">675</a></td><td><pre><span class="deletion">-	print('#{0}#'.format('https://acid.vegas/scroll'.center(54)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l676" name="l676">676</a></td><td><pre><span class="deletion">-	print('#{0}#'.format(''.center(54)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l677" name="l677">677</a></td><td><pre><span class="deletion">-	print('#'*56)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l678" name="l678">678</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l679" name="l679">679</a></td><td><pre><span class="deletion">-def irc(msg):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l680" name="l680">680</a></td><td><pre><span class="deletion">-	logging.debug('[~] - ' + msg)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l681" name="l681">681</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l682" name="l682">682</a></td><td><pre><span class="deletion">-def setup_logger():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l683" name="l683">683</a></td><td><pre><span class="deletion">-	stream_handler = logging.StreamHandler(sys.stdout)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l684" name="l684">684</a></td><td><pre><span class="deletion">-	if config.settings.log:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l685" name="l685">685</a></td><td><pre><span class="deletion">-		log_file     = os.path.join(os.path.join('data','logs'), 'scroll.log')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l686" name="l686">686</a></td><td><pre><span class="deletion">-		file_handler = RotatingFileHandler(log_file, maxBytes=256000, backupCount=3)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l687" name="l687">687</a></td><td><pre><span class="deletion">-		logging.basicConfig(level=logging.NOTSET, format='%(asctime)s | %(message)s', datefmt='%I:%M:%S', handlers=(file_handler,stream_handler))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l688" name="l688">688</a></td><td><pre><span class="deletion">-	else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l689" name="l689">689</a></td><td><pre><span class="deletion">-		logging.basicConfig(level=logging.NOTSET, format='%(asctime)s | %(message)s', datefmt='%I:%M:%S', handlers=(stream_handler,))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l690" name="l690">690</a></td><td><pre><span class="bold">diff --git a/scroll/core/functions.py b/scroll/core/functions.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l691" name="l691">691</a></td><td><pre><span class="bold">index 6c7b13a..f5746e4 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l692" name="l692">692</a></td><td><pre><span class="bold">--- a/scroll/core/functions.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l693" name="l693">693</a></td><td><pre><span class="bold">+++ b/scroll/core/functions.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l694" name="l694">694</a></td><td><pre><span class="hunk">@@ -2,14 +2,9 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l695" name="l695">695</a></td><td><pre> # Scroll IRC Art Bot - Developed by acidvegas in Python (https://acid.vegas/scroll)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l696" name="l696">696</a></td><td><pre> # functions.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l697" name="l697">697</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l698" name="l698">698</a></td><td><pre><span class="deletion">-import base64</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l699" name="l699">699</a></td><td><pre><span class="deletion">-import json</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l700" name="l700">700</a></td><td><pre><span class="deletion">-import os</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l701" name="l701">701</a></td><td><pre> import random</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l702" name="l702">702</a></td><td><pre> import re</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l703" name="l703">703</a></td><td><pre> import subprocess</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l704" name="l704">704</a></td><td><pre><span class="deletion">-import urllib.parse</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l705" name="l705">705</a></td><td><pre><span class="deletion">-import urllib.request</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l706" name="l706">706</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l707" name="l707">707</a></td><td><pre> import config</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l708" name="l708">708</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l709" name="l709">709</a></td><td><pre><span class="hunk">@@ -29,19 +24,6 @@</span> </span>def check_trunc(trunc):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l710" name="l710">710</a></td><td><pre> 	else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l711" name="l711">711</a></td><td><pre> 		return False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l712" name="l712">712</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l713" name="l713">713</a></td><td><pre><span class="deletion">-def get_size(file_path):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l714" name="l714">714</a></td><td><pre><span class="deletion">-	return os.path.getsize(file_path)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l715" name="l715">715</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l716" name="l716">716</a></td><td><pre><span class="deletion">-def get_source(url):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l717" name="l717">717</a></td><td><pre><span class="deletion">-	return urllib.request.urlopen(url, timeout=15).read().decode('utf8')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l718" name="l718">718</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l719" name="l719">719</a></td><td><pre><span class="deletion">-def imgur_upload(file_path):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l720" name="l720">720</a></td><td><pre><span class="deletion">-	data = urllib.parse.urlencode({'image':base64.b64encode(open(file_path,'rb').read()),'key':config.IMGUR_API_KEY,'name':'ASCII uploaded via Scroll','title':'ASCII uploaded via Scroll','type':'base64'}).encode('utf8')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l721" name="l721">721</a></td><td><pre><span class="deletion">-	headers = {'Authorization':'Client-ID ' + config.IMGUR_API_KEY}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l722" name="l722">722</a></td><td><pre><span class="deletion">-	req = urllib.request.Request('https://api.imgur.com/3/upload.json', data, headers)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l723" name="l723">723</a></td><td><pre><span class="deletion">-	response = json.loads(urllib.request.urlopen(req).read())</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l724" name="l724">724</a></td><td><pre><span class="deletion">-	return response['data']['link']</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l725" name="l725">725</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l726" name="l726">726</a></td><td><pre> def is_admin(ident):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l727" name="l727">727</a></td><td><pre> 	return re.compile(config.settings.admin.replace('*','.*')).search(ident)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l728" name="l728">728</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l729" name="l729">729</a></td><td><pre><span class="bold">diff --git a/scroll/core/irc.py b/scroll/core/irc.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l730" name="l730">730</a></td><td><pre><span class="bold">index afb0547..2769b2d 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l731" name="l731">731</a></td><td><pre><span class="bold">--- a/scroll/core/irc.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l732" name="l732">732</a></td><td><pre><span class="bold">+++ b/scroll/core/irc.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l733" name="l733">733</a></td><td><pre><span class="hunk">@@ -6,34 +6,41 @@</span> </span>import glob</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l734" name="l734">734</a></td><td><pre> import os</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l735" name="l735">735</a></td><td><pre> import random</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l736" name="l736">736</a></td><td><pre> import socket</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l737" name="l737">737</a></td><td><pre><span class="insertion">+</span><span class="insertion">import ssl</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l738" name="l738">738</a></td><td><pre> import threading</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l739" name="l739">739</a></td><td><pre> import time</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l740" name="l740">740</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l741" name="l741">741</a></td><td><pre><span class="deletion">-import ascii2png</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l742" name="l742">742</a></td><td><pre> import config</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l743" name="l743">743</a></td><td><pre><span class="deletion">-import constants</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l744" name="l744">744</a></td><td><pre> import database</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l745" name="l745">745</a></td><td><pre><span class="deletion">-import debug</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l746" name="l746">746</a></td><td><pre> import functions</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l747" name="l747">747</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l748" name="l748">748</a></td><td><pre><span class="deletion">-# Load optional modules</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l749" name="l749">749</a></td><td><pre><span class="deletion">-if config.connection.ssl:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l750" name="l750">750</a></td><td><pre><span class="deletion">-	import ssl</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l751" name="l751">751</a></td><td><pre><span class="deletion">-if config.connection.proxy:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l752" name="l752">752</a></td><td><pre><span class="deletion">-	try:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l753" name="l753">753</a></td><td><pre><span class="deletion">-		import sock</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l754" name="l754">754</a></td><td><pre><span class="deletion">-	except ImportError:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l755" name="l755">755</a></td><td><pre><span class="deletion">-		debug.error_exit('Missing PySocks module! (https://pypi.python.org/pypi/PySocks)') # Required for proxy support.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l756" name="l756">756</a></td><td><pre><span class="insertion">+</span><span class="insertion"># Control characters &amp; color codes</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l757" name="l757">757</a></td><td><pre><span class="insertion">+</span><span class="insertion">bold        = '\x02'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l758" name="l758">758</a></td><td><pre><span class="insertion">+</span><span class="insertion">underline   = '\x1F'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l759" name="l759">759</a></td><td><pre><span class="insertion">+</span><span class="insertion">reset       = '\x0f'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l760" name="l760">760</a></td><td><pre><span class="insertion">+</span><span class="insertion">white       = '00'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l761" name="l761">761</a></td><td><pre><span class="insertion">+</span><span class="insertion">black       = '01'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l762" name="l762">762</a></td><td><pre><span class="insertion">+</span><span class="insertion">blue        = '02'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l763" name="l763">763</a></td><td><pre><span class="insertion">+</span><span class="insertion">green       = '03'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l764" name="l764">764</a></td><td><pre><span class="insertion">+</span><span class="insertion">red         = '04'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l765" name="l765">765</a></td><td><pre><span class="insertion">+</span><span class="insertion">brown       = '05'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l766" name="l766">766</a></td><td><pre><span class="insertion">+</span><span class="insertion">purple      = '06'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l767" name="l767">767</a></td><td><pre><span class="insertion">+</span><span class="insertion">orange      = '07'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l768" name="l768">768</a></td><td><pre><span class="insertion">+</span><span class="insertion">yellow      = '08'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l769" name="l769">769</a></td><td><pre><span class="insertion">+</span><span class="insertion">light_green = '09'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l770" name="l770">770</a></td><td><pre><span class="insertion">+</span><span class="insertion">cyan        = '10'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l771" name="l771">771</a></td><td><pre><span class="insertion">+</span><span class="insertion">light_cyan  = '11'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l772" name="l772">772</a></td><td><pre><span class="insertion">+</span><span class="insertion">light_blue  = '12'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l773" name="l773">773</a></td><td><pre><span class="insertion">+</span><span class="insertion">pink        = '13'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l774" name="l774">774</a></td><td><pre><span class="insertion">+</span><span class="insertion">grey        = '14'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l775" name="l775">775</a></td><td><pre><span class="insertion">+</span><span class="insertion">light_grey  = '15'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l776" name="l776">776</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l777" name="l777">777</a></td><td><pre> def color(msg, foreground, background=None):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l778" name="l778">778</a></td><td><pre><span class="deletion">-	return f'\x03{foreground},{background}{msg}{constants.reset}' if background else f'\x03{foreground}{msg}{constants.reset}'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l779" name="l779">779</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l780" name="l780">780</a></td><td><pre><span class="deletion">-ascii_dir = os.path.join('data', 'art')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l781" name="l781">781</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">return f'\x03{foreground},{background}{msg}{reset}' if background else f'\x03{foreground}{msg}{reset}'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l782" name="l782">782</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l783" name="l783">783</a></td><td><pre> class IRC(object):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l784" name="l784">784</a></td><td><pre> 	def __init__(self):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l785" name="l785">785</a></td><td><pre> 		self.last     = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l786" name="l786">786</a></td><td><pre><span class="deletion">-		self.last_png = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l787" name="l787">787</a></td><td><pre> 		self.playing  = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l788" name="l788">788</a></td><td><pre> 		self.slow     = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l789" name="l789">789</a></td><td><pre> 		self.stopper  = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l790" name="l790">790</a></td><td><pre><span class="hunk">@@ -41,65 +48,43 @@</span> </span>class IRC(object):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l791" name="l791">791</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l792" name="l792">792</a></td><td><pre> 	def connect(self):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l793" name="l793">793</a></td><td><pre> 		try:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l794" name="l794">794</a></td><td><pre><span class="deletion">-			self.create_socket()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l795" name="l795">795</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">self.sock = socket.socket(socket.AF_INET6) if config.connection.ipv6 else socket.socket()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l796" name="l796">796</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">if config.connection.vhost:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l797" name="l797">797</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">self.sock.bind((config.connection.vhost, 0))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l798" name="l798">798</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">if config.connection.ssl:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l799" name="l799">799</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">ctx = ssl.create_default_context()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l800" name="l800">800</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">if config.cert.file:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l801" name="l801">801</a></td><td><pre><span class="insertion">+</span>					<span class="insertion">ctx.load_cert_chain(config.cert.file, password=config.cert.password)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l802" name="l802">802</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">self.sock = ctx.wrap_socket(self.sock)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l803" name="l803">803</a></td><td><pre> 			self.sock.connect((config.connection.server, config.connection.port))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l804" name="l804">804</a></td><td><pre><span class="deletion">-			self.register()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l805" name="l805">805</a></td><td><pre><span class="deletion">-		except socket.error as ex:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l806" name="l806">806</a></td><td><pre><span class="deletion">-			debug.error('Failed to connect to IRC server.', ex)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l807" name="l807">807</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">Commands.raw(f'USER {config.ident.username} 0 * :{config.ident.realname}')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l808" name="l808">808</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">Commands.raw('NICK '+ config.ident.nickname)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l809" name="l809">809</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">except Exception as ex:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l810" name="l810">810</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">print(f'[!] - Failed to connect to IRC server! ({ex!s})')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l811" name="l811">811</a></td><td><pre> 			Events.disconnect()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l812" name="l812">812</a></td><td><pre> 		else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l813" name="l813">813</a></td><td><pre> 			self.listen()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l814" name="l814">814</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l815" name="l815">815</a></td><td><pre><span class="deletion">-	def create_socket(self):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l816" name="l816">816</a></td><td><pre><span class="deletion">-		family = socket.AF_INET6 if config.connection.ipv6 else socket.AF_INET</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l817" name="l817">817</a></td><td><pre><span class="deletion">-		if config.connection.proxy:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l818" name="l818">818</a></td><td><pre><span class="deletion">-			proxy_server, proxy_port = config.connection.proxy.split(':')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l819" name="l819">819</a></td><td><pre><span class="deletion">-			self.sock = socks.socksocket(family, socket.SOCK_STREAM)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l820" name="l820">820</a></td><td><pre><span class="deletion">-			self.sock.setblocking(0)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l821" name="l821">821</a></td><td><pre><span class="deletion">-			self.sock.settimeout(15)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l822" name="l822">822</a></td><td><pre><span class="deletion">-			self.sock.setproxy(socks.PROXY_TYPE_SOCKS5, proxy_server, int(proxy_port))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l823" name="l823">823</a></td><td><pre><span class="deletion">-		else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l824" name="l824">824</a></td><td><pre><span class="deletion">-			self.sock = socket.socket(family, socket.SOCK_STREAM)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l825" name="l825">825</a></td><td><pre><span class="deletion">-		if config.connection.vhost:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l826" name="l826">826</a></td><td><pre><span class="deletion">-			self.sock.bind((config.connection.vhost, 0))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l827" name="l827">827</a></td><td><pre><span class="deletion">-		if config.connection.ssl:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l828" name="l828">828</a></td><td><pre><span class="deletion">-			ctx = ssl.create_default_context()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l829" name="l829">829</a></td><td><pre><span class="deletion">-			if config.cert.file:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l830" name="l830">830</a></td><td><pre><span class="deletion">-				ctx.load_cert_chain(config.cert.file, config.cert.key, config.cert.password)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l831" name="l831">831</a></td><td><pre><span class="deletion">-			if config.connection.ssl_verify:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l832" name="l832">832</a></td><td><pre><span class="deletion">-				ctx.verify_mode = ssl.CERT_REQUIRED</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l833" name="l833">833</a></td><td><pre><span class="deletion">-				ctx.load_default_certs()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l834" name="l834">834</a></td><td><pre><span class="deletion">-			else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l835" name="l835">835</a></td><td><pre><span class="deletion">-				ctx.check_hostname = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l836" name="l836">836</a></td><td><pre><span class="deletion">-				ctx.verify_mode = ssl.CERT_NONE</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l837" name="l837">837</a></td><td><pre><span class="deletion">-			self.sock = ctx.wrap_socket(self.sock)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l838" name="l838">838</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l839" name="l839">839</a></td><td><pre> 	def listen(self):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l840" name="l840">840</a></td><td><pre> 		while True:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l841" name="l841">841</a></td><td><pre> 			try:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l842" name="l842">842</a></td><td><pre> 				data = self.sock.recv(1024).decode('utf-8')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l843" name="l843">843</a></td><td><pre> 				for line in (line for line in data.split('\r\n') if len(line.split()) &gt;= 2):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l844" name="l844">844</a></td><td><pre><span class="deletion">-					debug.irc(line)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l845" name="l845">845</a></td><td><pre><span class="insertion">+</span>					<span class="insertion">print('[~] - ' + line)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l846" name="l846">846</a></td><td><pre> 					Events.handle(line)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l847" name="l847">847</a></td><td><pre> 			except (UnicodeDecodeError, UnicodeEncodeError):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l848" name="l848">848</a></td><td><pre> 				pass</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l849" name="l849">849</a></td><td><pre> 			except Exception as ex:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l850" name="l850">850</a></td><td><pre><span class="deletion">-				debug.error('Unexpected error occured.', ex)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l851" name="l851">851</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">print(f'[!] - Unexpected error occured! ({ex!s})')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l852" name="l852">852</a></td><td><pre> 				break</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l853" name="l853">853</a></td><td><pre> 		Events.disconnect()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l854" name="l854">854</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l855" name="l855">855</a></td><td><pre><span class="deletion">-	def register(self):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l856" name="l856">856</a></td><td><pre><span class="deletion">-		if config.login.network:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l857" name="l857">857</a></td><td><pre><span class="deletion">-			Commands.raw('PASS ' + config.login.network)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l858" name="l858">858</a></td><td><pre><span class="deletion">-		Commands.raw(f'USER {config.ident.username} 0 * :{config.ident.realname}')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l859" name="l859">859</a></td><td><pre><span class="deletion">-		Commands.raw('NICK '+ config.ident.nickname)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l860" name="l860">860</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l861" name="l861">861</a></td><td><pre> class Commands:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l862" name="l862">862</a></td><td><pre> 	def error(chan, msg, reason=None):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l863" name="l863">863</a></td><td><pre> 		if reason:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l864" name="l864">864</a></td><td><pre><span class="deletion">-			Commands.sendmsg(chan, '[{0}] {1} {2}'.format(color('ERROR', constants.red), msg, color(f'({reason})', constants.grey)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l865" name="l865">865</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">Commands.sendmsg(chan, '[{0}] {1} {2}'.format(color('ERROR', red), msg, color(f'({reason})', grey)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l866" name="l866">866</a></td><td><pre> 		else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l867" name="l867">867</a></td><td><pre><span class="deletion">-			Commands.sendmsg(chan, '[{0}] {1}'.format(color('ERROR', constants.red), msg))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l868" name="l868">868</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">Commands.sendmsg(chan, '[{0}] {1}'.format(color('ERROR', red), msg))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l869" name="l869">869</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l870" name="l870">870</a></td><td><pre> 	def join_channel(chan, key=None):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l871" name="l871">871</a></td><td><pre> 		Commands.raw(f'JOIN {chan} {key}') if key else Commands.raw('JOIN ' + chan)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l872" name="l872">872</a></td><td><pre><span class="hunk">@@ -111,9 +96,8 @@</span> </span>class Commands:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l873" name="l873">873</a></td><td><pre> 			if len(data.splitlines()) &gt; functions.floatint(database.Settings.get('max_lines')) and chan != '#scroll':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l874" name="l874">874</a></td><td><pre> 				Commands.error(chan, 'File is too big.', 'Take it to #scroll')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l875" name="l875">875</a></td><td><pre> 			else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l876" name="l876">876</a></td><td><pre><span class="deletion">-				name = ascii_file.split(ascii_dir)[1]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l877" name="l877">877</a></td><td><pre> 				data = data.splitlines()[trunc[0]:-trunc[1]] if trunc else data.splitlines()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l878" name="l878">878</a></td><td><pre><span class="deletion">-				Commands.sendmsg(chan, ascii_file.split(ascii_dir)[1])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l879" name="l879">879</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">Commands.sendmsg(chan, f'{bold}the ascii gods have chosen: {underline}{ascii_file[4:-4]}')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l880" name="l880">880</a></td><td><pre> 				for line in (line for line in data if line):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l881" name="l881">881</a></td><td><pre> 					if Bot.stopper:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l882" name="l882">882</a></td><td><pre> 						break</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l883" name="l883">883</a></td><td><pre><span class="hunk">@@ -121,7 +105,7 @@</span> </span>class Commands:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l884" name="l884">884</a></td><td><pre> 						line = line[trunc[2]:-trunc[3]]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l885" name="l885">885</a></td><td><pre> 					Commands.sendmsg(chan, ' '*trunc[4] + line) if trunc else Commands.sendmsg(chan, line)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l886" name="l886">886</a></td><td><pre> 		except Exception as ex:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l887" name="l887">887</a></td><td><pre><span class="deletion">-			debug.error('Error occured in the play function!', ex)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l888" name="l888">888</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">print(f'Error occured in the play function! ({ex!s})')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l889" name="l889">889</a></td><td><pre> 		finally:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l890" name="l890">890</a></td><td><pre> 			Bot.stopper = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l891" name="l891">891</a></td><td><pre> 			Bot.playing = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l892" name="l892">892</a></td><td><pre><span class="hunk">@@ -149,20 +133,11 @@</span> </span>class Events:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l893" name="l893">893</a></td><td><pre> 		time.sleep(15)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l894" name="l894">894</a></td><td><pre> 		Bot.connect()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l895" name="l895">895</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l896" name="l896">896</a></td><td><pre><span class="deletion">-	def kick(chan, kicked):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l897" name="l897">897</a></td><td><pre><span class="deletion">-		if kicked == config.ident.nickname:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l898" name="l898">898</a></td><td><pre><span class="deletion">-			if chan == config.connection.channel:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l899" name="l899">899</a></td><td><pre><span class="deletion">-				time.sleep(3)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l900" name="l900">900</a></td><td><pre><span class="deletion">-				Commands.join_channel(chan, config.connection.key)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l901" name="l901">901</a></td><td><pre><span class="deletion">-			elif chan == '#scroll':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l902" name="l902">902</a></td><td><pre><span class="deletion">-				time.sleep(3)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l903" name="l903">903</a></td><td><pre><span class="deletion">-				Commands.join_channel(chan)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l904" name="l904">904</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l905" name="l905">905</a></td><td><pre> 	def message(ident, nick, chan, msg):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l906" name="l906">906</a></td><td><pre> 		try:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l907" name="l907">907</a></td><td><pre> 			args = msg.split()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l908" name="l908">908</a></td><td><pre> 			if msg == '@scroll':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l909" name="l909">909</a></td><td><pre><span class="deletion">-				Commands.sendmsg(chan, constants.bold + 'Scroll IRC Bot - Developed by acidvegas in Python - https://acid.vegas/scroll')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l910" name="l910">910</a></td><td><pre><span class="insertion">+</span>				<span class="insertion">Commands.sendmsg(chan, bold + 'Scroll IRC Bot - Developed by acidvegas in Python - https://github.com/ircart/scroll')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l911" name="l911">911</a></td><td><pre> 			elif args[0] == '.ascii' and not database.Ignore.check(ident):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l912" name="l912">912</a></td><td><pre> 				if Bot.playing and msg == '.ascii stop':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l913" name="l913">913</a></td><td><pre> 					Bot.stopper = True</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l914" name="l914">914</a></td><td><pre><span class="hunk">@@ -173,81 +148,31 @@</span> </span>class Events:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l915" name="l915">915</a></td><td><pre> 				elif len(args) &gt;= 2:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l916" name="l916">916</a></td><td><pre> 					Bot.slow = False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l917" name="l917">917</a></td><td><pre> 					if args[1] == 'dirs' and len(args) == 2:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l918" name="l918">918</a></td><td><pre><span class="deletion">-						dirs = sorted(glob.glob(os.path.join(ascii_dir, '*/')))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l919" name="l919">919</a></td><td><pre><span class="insertion">+</span>						<span class="insertion">dirs = sorted(glob.glob('art/*/'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l920" name="l920">920</a></td><td><pre> 						for directory in dirs:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l921" name="l921">921</a></td><td><pre> 							name = os.path.basename(os.path.dirname(directory))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l922" name="l922">922</a></td><td><pre> 							file_count = str(len(glob.glob(os.path.join(directory, '*.txt'))))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l923" name="l923">923</a></td><td><pre><span class="deletion">-							Commands.sendmsg(chan, '[{0}] {1} {2}'.format(color(str(dirs.index(directory)+1).zfill(2), constants.pink), name.ljust(10), color(f'({file_count})', constants.grey)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l924" name="l924">924</a></td><td><pre><span class="deletion">-					elif args[1] == 'png' and len(args) == 3:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l925" name="l925">925</a></td><td><pre><span class="deletion">-						url = args[2]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l926" name="l926">926</a></td><td><pre><span class="deletion">-						if url.startswith('https://pastebin.com/raw/') or url.startswith('http://termbin.com/'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l927" name="l927">927</a></td><td><pre><span class="deletion">-							ascii2png.ascii_png(url)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l928" name="l928">928</a></td><td><pre><span class="deletion">-							ascii_file = os.path.join('data','temp.png')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l929" name="l929">929</a></td><td><pre><span class="deletion">-							if os.path.getsize(ascii_file) &lt; int(database.Settings.get('png_max_bytes')):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l930" name="l930">930</a></td><td><pre><span class="deletion">-								Commands.sendmsg(chan, functions.imgur_upload(os.path.join('data','temp.png')))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l931" name="l931">931</a></td><td><pre><span class="deletion">-								Bot.last_png = time.time()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l932" name="l932">932</a></td><td><pre><span class="deletion">-							else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l933" name="l933">933</a></td><td><pre><span class="deletion">-								Commands.error(chan, 'File too large', '2MB Max')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l934" name="l934">934</a></td><td><pre><span class="deletion">-						else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l935" name="l935">935</a></td><td><pre><span class="deletion">-							Commands.error(chan, 'Invalid URL.', 'Only PasteBin &amp; TermBin URLs can be used.')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l936" name="l936">936</a></td><td><pre><span class="deletion">-					elif args[1] == 'remote' and len(args) == 3:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l937" name="l937">937</a></td><td><pre><span class="deletion">-						url = args[2]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l938" name="l938">938</a></td><td><pre><span class="deletion">-						if url.startswith('https://pastebin.com/raw/') or url.startswith('https://termbin.com/'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l939" name="l939">939</a></td><td><pre><span class="deletion">-							data = functions.get_source(url)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l940" name="l940">940</a></td><td><pre><span class="deletion">-							if data:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l941" name="l941">941</a></td><td><pre><span class="deletion">-								for item in data.split('\n'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l942" name="l942">942</a></td><td><pre><span class="deletion">-									Commands.sendmsg(chan, item)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l943" name="l943">943</a></td><td><pre><span class="deletion">-							else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l944" name="l944">944</a></td><td><pre><span class="deletion">-								Commands.error(chan, 'Found no data on URL!')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l945" name="l945">945</a></td><td><pre><span class="deletion">-						else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l946" name="l946">946</a></td><td><pre><span class="deletion">-							Commands.error(chan, 'Invalid URL!', 'Must be a pastebin.com or termbin.com link.')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l947" name="l947">947</a></td><td><pre><span class="insertion">+</span>							<span class="insertion">Commands.sendmsg(chan, '[{0}] {1} {2}'.format(color(str(dirs.index(directory)+1).zfill(2), pink), name.ljust(10), color(f'({file_count})', grey)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l948" name="l948">948</a></td><td><pre> 					elif args[1] == 'search' and len(args) == 3:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l949" name="l949">949</a></td><td><pre> 						query   = args[2]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l950" name="l950">950</a></td><td><pre><span class="deletion">-						results = glob.glob(os.path.join(ascii_dir, f'**/*{query}*.txt'), recursive=True)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l951" name="l951">951</a></td><td><pre><span class="insertion">+</span>						<span class="insertion">results = glob.glob(f'art/**/*{query}*.txt', recursive=True)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l952" name="l952">952</a></td><td><pre> 						if results:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l953" name="l953">953</a></td><td><pre> 							results = results[:int(database.Settings.get('max_results'))]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l954" name="l954">954</a></td><td><pre> 							for file_name in results:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l955" name="l955">955</a></td><td><pre> 								count = str(results.index(file_name)+1)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l956" name="l956">956</a></td><td><pre><span class="deletion">-								Commands.sendmsg(chan, '[{0}] {1}'.format(color(count.zfill(2), constants.pink), os.path.basename(file_name)))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l957" name="l957">957</a></td><td><pre><span class="insertion">+</span>								<span class="insertion">Commands.sendmsg(chan, '[{0}] {1}'.format(color(count.zfill(2), pink), os.path.basename(file_name)[:-4]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l958" name="l958">958</a></td><td><pre> 						else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l959" name="l959">959</a></td><td><pre> 							Commands.error(chan, 'No results found.')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l960" name="l960">960</a></td><td><pre><span class="deletion">-					elif args[1] == 'upload':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l961" name="l961">961</a></td><td><pre><span class="deletion">-						if len(args) == 2:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l962" name="l962">962</a></td><td><pre><span class="deletion">-							uploads = database.Uploads.read()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l963" name="l963">963</a></td><td><pre><span class="deletion">-							if uploads:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l964" name="l964">964</a></td><td><pre><span class="deletion">-								for upload in uploads:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l965" name="l965">965</a></td><td><pre><span class="deletion">-									Commands.sendmsg(chan, '[{0}] {1} - {2} - {3}.txt'.format(color(uploads.index(upload)+1, constants.pink), color(upload[0], constants.yellow), color(upload[1], constants.grey), upload[2]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l966" name="l966">966</a></td><td><pre><span class="deletion">-							else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l967" name="l967">967</a></td><td><pre><span class="deletion">-								Commands.error(chan, 'No uploaded files!', 'Use &quot;.ascii upload &lt;url&gt; &lt;title&gt;&quot; to upload.')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l968" name="l968">968</a></td><td><pre><span class="deletion">-						elif len(args) == 4:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l969" name="l969">969</a></td><td><pre><span class="deletion">-							url = args[2]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l970" name="l970">970</a></td><td><pre><span class="deletion">-							if url.startswith('https://pastebin.com/raw/') or url.startswith('https://termbin.com/'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l971" name="l971">971</a></td><td><pre><span class="deletion">-								if url not in [item[1] for item in database.Uploads.read()]:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l972" name="l972">972</a></td><td><pre><span class="deletion">-									title = args[3].lower()[:20]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l973" name="l973">973</a></td><td><pre><span class="deletion">-									check = (glob.glob(os.path.join(ascii_dir, f'**/{title}.txt'), recursive=True)[:1] or [None])[0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l974" name="l974">974</a></td><td><pre><span class="deletion">-									if not check:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l975" name="l975">975</a></td><td><pre><span class="deletion">-										if len(database.Uploads.read(nick)) == int(database.Settings.get('max_uploads_per')):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l976" name="l976">976</a></td><td><pre><span class="deletion">-											database.Uploads.remove(database.Uploads.read(nick)[0][1])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l977" name="l977">977</a></td><td><pre><span class="deletion">-										elif len(database.Uploads.read()) == int(database.Settings.get('max_uploads')):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l978" name="l978">978</a></td><td><pre><span class="deletion">-											database.Uploads.remove(database.Uploads.read()[0][1])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l979" name="l979">979</a></td><td><pre><span class="deletion">-										database.Uploads.add(nick, url, title)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l980" name="l980">980</a></td><td><pre><span class="deletion">-										Commands.sendmsg(chan, 'Uploaded!')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l981" name="l981">981</a></td><td><pre><span class="deletion">-									else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l982" name="l982">982</a></td><td><pre><span class="deletion">-										Commands.error(chan, 'File with that title already exists!')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l983" name="l983">983</a></td><td><pre><span class="deletion">-								else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l984" name="l984">984</a></td><td><pre><span class="deletion">-									Commands.error(chan, 'URL is already uploaded!')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l985" name="l985">985</a></td><td><pre><span class="deletion">-							else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l986" name="l986">986</a></td><td><pre><span class="deletion">-								Commands.error(chan, 'Invalid URL.', 'Only PasteBin &amp; TermBin URLs can be used.')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l987" name="l987">987</a></td><td><pre> 					elif args[1] == 'random':</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l988" name="l988">988</a></td><td><pre> 						if len(args) == 2:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l989" name="l989">989</a></td><td><pre><span class="deletion">-							ascii_file = random.choice([file for file in glob.glob(os.path.join(ascii_dir, '**/*.txt'), recursive=True) if os.path.basename(os.path.dirname(file)) not in database.Settings.get('rnd_exclude').split(',')])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l990" name="l990">990</a></td><td><pre><span class="insertion">+</span>							<span class="insertion">ascii_file = random.choice([file for file in glob.glob('art/**/*.txt', recursive=True) if os.path.basename(os.path.dirname(file)) not in database.Settings.get('rnd_exclude').split(',')])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l991" name="l991">991</a></td><td><pre> 							threading.Thread(target=Commands.play, args=(chan, ascii_file)).start()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l992" name="l992">992</a></td><td><pre> 						elif len(args) == 3:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l993" name="l993">993</a></td><td><pre> 							dir = args[2]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l994" name="l994">994</a></td><td><pre><span class="deletion">-							if '../' in dir:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l995" name="l995">995</a></td><td><pre><span class="insertion">+</span>							<span class="insertion">if not dir.isalpha():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l996" name="l996">996</a></td><td><pre> 								Commands.error(chan, 'Nice try nerd!')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l997" name="l997">997</a></td><td><pre><span class="deletion">-							elif os.path.isdir(os.path.join(ascii_dir, dir)):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l998" name="l998">998</a></td><td><pre><span class="deletion">-								ascii_file = random.choice(glob.glob(os.path.join(ascii_dir, dir + '/*.txt'), recursive=True))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l999" name="l999">999</a></td><td><pre><span class="insertion">+</span>							<span class="insertion">elif os.path.isdir('art/' + dir):</span></pre></td></tr>
</table></pre>
