<!doctype html>
<link rel="stylesheet" href="../../style.css">
<title>random :: 4a370e9</title>
<h1><a href="../index.html" title="Back to Repository">&larr;&#xFE0E;</a> random :: 4a370e9</h1>
<hr>
<table id="main" cellpadding="0" cellspacing="0">
<tr class="item"><td class="linenumber"><a href="#l1" name="l1">1</a></td><td><pre><span class="commit">commit 4a370e92de957859f870142d561794cb1facff00</span><span class="commit"> (</span><span class="reference">HEAD -&gt; </span><span class="branch">master</span><span class="commit">)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l2" name="l2">2</a></td><td><pre>Author: acidvegas &lt;acid.vegas@acid.vegas&gt;</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l3" name="l3">3</a></td><td><pre>Date:   Thu Aug 1 22:15:39 2019 -0400</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l4" name="l4">4</a></td><td><pre></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l5" name="l5">5</a></td><td><pre>    update</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l6" name="l6">6</a></td><td><pre>---</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l7" name="l7">7</a></td><td><pre> 2fa.py                 |   4 <span class="insertion">+</span><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l8" name="l8">8</a></td><td><pre> acidbox/setup          |  10 <span class="insertion">++</span><span class="deletion">--</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l9" name="l9">9</a></td><td><pre> btkb.sh                |  12 <span class="deletion">----</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l10" name="l10">10</a></td><td><pre> docs/gpg.md            |  28 <span class="insertion">++++</span><span class="deletion">-----</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l11" name="l11">11</a></td><td><pre> docs/ssh.md            |  43 <span class="insertion">+++++++</span><span class="deletion">-------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l12" name="l12">12</a></td><td><pre> gitremote.sh           |  14 <span class="deletion">-----</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l13" name="l13">13</a></td><td><pre> mkchroot               | 153 <span class="insertion">+++++++++++++++++++++++++++++++++++++++++++++++++</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l14" name="l14">14</a></td><td><pre> networking/ap.py       |  23 <span class="deletion">--------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l15" name="l15">15</a></td><td><pre> networking/discover.py |   4 <span class="insertion">+</span><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l16" name="l16">16</a></td><td><pre> progress.sh            |   7 <span class="insertion">+++</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l17" name="l17">17</a></td><td><pre> scales.py              |  88 <span class="deletion">----------------------------</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l18" name="l18">18</a></td><td><pre> 11 files changed, 207 insertions(+), 179 deletions(-)</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l19" name="l19">19</a></td><td><pre></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l20" name="l20">20</a></td><td><pre><span class="bold">diff --git a/2fa.py b/2fa.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l21" name="l21">21</a></td><td><pre><span class="bold">index c11897f..50c2add 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l22" name="l22">22</a></td><td><pre><span class="bold">--- a/2fa.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l23" name="l23">23</a></td><td><pre><span class="bold">+++ b/2fa.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l24" name="l24">24</a></td><td><pre><span class="hunk">@@ -35,11 +35,11 @@</span> </span>secret = input('secret : ') or pyotp.random_base32()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l25" name="l25">25</a></td><td><pre> uri = pyotp.totp.TOTP(secret).provisioning_uri(name, issuer)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l26" name="l26">26</a></td><td><pre> qr = qrgen(uri).replace(' ', ' ')[:-1]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l27" name="l27">27</a></td><td><pre> max_len = len(qr.split('\n')[1])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l28" name="l28">28</a></td><td><pre><span class="deletion">-print(uri+'\n'+qr)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l29" name="l29">29</a></td><td><pre><span class="insertion">+</span><span class="insertion">print(f'{uri}\n{qr}')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l30" name="l30">30</a></td><td><pre> del name, issuer, uri, qr</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l31" name="l31">31</a></td><td><pre> while True:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l32" name="l32">32</a></td><td><pre> 	code = pyotp.TOTP(secret).now()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l33" name="l33">33</a></td><td><pre> 	seconds = int(time.strftime('%S'))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l34" name="l34">34</a></td><td><pre> 	remain = 60-seconds if seconds &gt;= 30 else 30-seconds</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l35" name="l35">35</a></td><td><pre><span class="deletion">-	print(f'{code} ({remain})'.center(max_len),  end='\r')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l36" name="l36">36</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">print(f'{code} ({remain})'.center(max_len), end='\r')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l37" name="l37">37</a></td><td><pre> 	time.sleep(1)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l38" name="l38">38</a></td><td><pre><span class="bold">diff --git a/acidbox/setup b/acidbox/setup</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l39" name="l39">39</a></td><td><pre><span class="bold">index aa27fa6..462d262 100755</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l40" name="l40">40</a></td><td><pre><span class="bold">--- a/acidbox/setup</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l41" name="l41">41</a></td><td><pre><span class="bold">+++ b/acidbox/setup</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l42" name="l42">42</a></td><td><pre><span class="hunk">@@ -1,7 +1,7 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l43" name="l43">43</a></td><td><pre> #!/bin/sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l44" name="l44">44</a></td><td><pre> set -e</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l45" name="l45">45</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l46" name="l46">46</a></td><td><pre><span class="deletion">-function setup_motd() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l47" name="l47">47</a></td><td><pre><span class="insertion">+</span><span class="insertion">setup_motd() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l48" name="l48">48</a></td><td><pre> 	RESET='\033[0m'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l49" name="l49">49</a></td><td><pre> 	GREEN='\033[0;32m'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l50" name="l50">50</a></td><td><pre> 	BGREEN='\033[1;32m'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l51" name="l51">51</a></td><td><pre><span class="hunk">@@ -11,7 +11,7 @@</span> </span>function setup_motd() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l52" name="l52">52</a></td><td><pre> 	RED='\033[1;31m'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l53" name="l53">53</a></td><td><pre> 	BLUE='\033[1;34m'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l54" name="l54">54</a></td><td><pre> 	UBLUE='\033[4;34m'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l55" name="l55">55</a></td><td><pre><span class="deletion">-	echo &quot;╔═══════════════════════╦══════════════════════════════════════════════════════════════╗</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l56" name="l56">56</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo -e &quot;╔═══════════════════════╦══════════════════════════════════════════════════════════════╗</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l57" name="l57">57</a></td><td><pre> ║${GREEN}  ▄▄▄·  ▄▄· ▪  ·▄▄▄▄   ${RESET}║                    ${RED}Connection Notice${RESET}                         ║</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l58" name="l58">58</a></td><td><pre> ║${GREEN} ▐█ ▀█ ▐█ ▌▪██ ██▪ ██  ${RESET}╟──────────────────────────────────────────────────────────────╢</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l59" name="l59">59</a></td><td><pre> ║${GREEN} ▄█▀▀█ ██ ▄▄▐█·▐█· ▐█▌ ${RESET}║                                                              ║</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l60" name="l60">60</a></td><td><pre><span class="hunk">@@ -33,7 +33,7 @@</span> </span>${YELLOW}Type ${BGREEN}cmds${YELLOW} to see a list of commands available.${RESET</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l61" name="l61">61</a></td><td><pre>  ${GREY}*${YELLOW} Stay in your home directory, keep the system clean, and make regular backups.&quot; &gt; /etc/motd</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l62" name="l62">62</a></td><td><pre> }</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l63" name="l63">63</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l64" name="l64">64</a></td><td><pre><span class="deletion">-function setup_user() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l65" name="l65">65</a></td><td><pre><span class="insertion">+</span><span class="insertion">setup_user() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l66" name="l66">66</a></td><td><pre> 	sudo useradd -m -G ssh -s /bin/bash $1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l67" name="l67">67</a></td><td><pre> 	mkdir /home/$1/.scripts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l68" name="l68">68</a></td><td><pre> 	wget -O /home/$1/.bashrc             https://git.supernets.org/acidvegas/acidbox/blob/master/files/.bashrc</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l69" name="l69">69</a></td><td><pre><span class="hunk">@@ -43,4 +43,6 @@</span> </span>function setup_user() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l70" name="l70">70</a></td><td><pre> 	wget -O /home/$1/.scripts/vhosts     https://git.supernets.org/acidvegas/acidbox/blob/master/files/vhosts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l71" name="l71">71</a></td><td><pre> 	echo &quot;clear &amp;&amp; reset&quot; &gt; /home/$1/.bash_logout</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l72" name="l72">72</a></td><td><pre> 	echo &quot;[[ -f ~/.bashrc ]] &amp;&amp; . ~/.bashrc&quot; &gt; /home/$1/.bash_profile</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l73" name="l73">73</a></td><td><pre><span class="deletion">-}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l74" name="l74">74</a></td><td><pre><span class="insertion">+</span><span class="insertion">}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l75" name="l75">75</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l76" name="l76">76</a></td><td><pre><span class="insertion">+</span><span class="insertion">setup_motd</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l77" name="l77">77</a></td><td><pre><span class="bold">diff --git a/btkb.sh b/btkb.sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l78" name="l78">78</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l79" name="l79">79</a></td><td><pre><span class="bold">index 6b56fa3..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l80" name="l80">80</a></td><td><pre><span class="bold">--- a/btkb.sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l81" name="l81">81</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l82" name="l82">82</a></td><td><pre><span class="hunk">@@ -1,12 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l83" name="l83">83</a></td><td><pre><span class="deletion">-#!/bin/sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l84" name="l84">84</a></td><td><pre><span class="deletion">-sudo pacman -S bluez bluez-utils</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l85" name="l85">85</a></td><td><pre><span class="deletion">-sudo systemctl enable bluetooth &amp;&amp; sudo systemctl start bluetooth</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l86" name="l86">86</a></td><td><pre><span class="deletion">-sudo sed -i 's/#AutoEnable=false/AutoEnable=true/' /etc/bluetooth/main.conf</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l87" name="l87">87</a></td><td><pre><span class="deletion">-bluetoothctl power on</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l88" name="l88">88</a></td><td><pre><span class="deletion">-bluetoothctl agent KeyboardOnly</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l89" name="l89">89</a></td><td><pre><span class="deletion">-bluetoothctl pairable on</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l90" name="l90">90</a></td><td><pre><span class="deletion">-bluetoothctl scan on</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l91" name="l91">91</a></td><td><pre><span class="deletion">-bluetoothctl pair CC:C5:0A:20:91:5B</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l92" name="l92">92</a></td><td><pre><span class="deletion">-bluetoothctl trust CC:C5:0A:20:91:5B</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l93" name="l93">93</a></td><td><pre><span class="deletion">-bluetoothctl connect CC:C5:0A:20:91:5B</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l94" name="l94">94</a></td><td><pre><span class="deletion">-bluetoothctl scan off</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l95" name="l95">95</a></td><td><pre><span class="bold">diff --git a/docs/gpg.md b/docs/gpg.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l96" name="l96">96</a></td><td><pre><span class="bold">index af24aba..6689b38 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l97" name="l97">97</a></td><td><pre><span class="bold">--- a/docs/gpg.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l98" name="l98">98</a></td><td><pre><span class="bold">+++ b/docs/gpg.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l99" name="l99">99</a></td><td><pre><span class="hunk">@@ -1,4 +1,6 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l100" name="l100">100</a></td><td><pre><span class="deletion">-# Create a key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l101" name="l101">101</a></td><td><pre><span class="insertion">+</span><span class="insertion"># GPG Cheat Sheet</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l102" name="l102">102</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l103" name="l103">103</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Create a key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l104" name="l104">104</a></td><td><pre> `gpg --expert --full-generate-key`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l105" name="l105">105</a></td><td><pre> * RSA (set your own capabilities)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l106" name="l106">106</a></td><td><pre> * Set to Certify only.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l107" name="l107">107</a></td><td><pre><span class="hunk">@@ -10,7 +12,7 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l108" name="l108">108</a></td><td><pre> * `adduid`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l109" name="l109">109</a></td><td><pre> * `save`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l110" name="l110">110</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l111" name="l111">111</a></td><td><pre><span class="deletion">-# Backup key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l112" name="l112">112</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Backup key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l113" name="l113">113</a></td><td><pre> * `mv ~/.gnupg/secring.gpg ~/.backup/gpg/`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l114" name="l114">114</a></td><td><pre> * `mv ~/.gnupg/pubring.gpg ~/.backup/gpg/`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l115" name="l115">115</a></td><td><pre> * `gpg -a --export-secret-key &lt;userid&gt; &gt; secret_key.gpg`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l116" name="l116">116</a></td><td><pre><span class="hunk">@@ -20,25 +22,25 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l117" name="l117">117</a></td><td><pre> * `gpg --list-secret-keys`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l118" name="l118">118</a></td><td><pre> * `rm secret_subkeys.gpg`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l119" name="l119">119</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l120" name="l120">120</a></td><td><pre><span class="deletion">-# Revoke cert</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l121" name="l121">121</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Revoke cert</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l122" name="l122">122</a></td><td><pre> * `gpg -a --output revoke.asc --gen-revoke '&lt;fingerprint&gt;'`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l123" name="l123">123</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l124" name="l124">124</a></td><td><pre><span class="deletion">-# Import/Export public key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l125" name="l125">125</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Import/Export public key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l126" name="l126">126</a></td><td><pre> * `gpg --import public.key`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l127" name="l127">127</a></td><td><pre> * `gpg --output public.key --armor --export &lt;userid&gt;`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l128" name="l128">128</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l129" name="l129">129</a></td><td><pre><span class="deletion">-# Import/Export private key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l130" name="l130">130</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Import/Export private key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l131" name="l131">131</a></td><td><pre> * `gpg --export-secret-keys --armor &lt;userid&gt; &gt; privkey.asc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l132" name="l132">132</a></td><td><pre> * `gpg --import privkey.asc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l133" name="l133">133</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l134" name="l134">134</a></td><td><pre><span class="deletion">-# Edit keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l135" name="l135">135</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Edit keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l136" name="l136">136</a></td><td><pre> * `gpg --edit-key &lt;userid&gt;`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l137" name="l137">137</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l138" name="l138">138</a></td><td><pre><span class="deletion">-# List (secret) keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l139" name="l139">139</a></td><td><pre><span class="insertion">+</span><span class="insertion">## List (secret) keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l140" name="l140">140</a></td><td><pre> * `gpg --list-keys`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l141" name="l141">141</a></td><td><pre> * `gpg --list-secret-keys`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l142" name="l142">142</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l143" name="l143">143</a></td><td><pre><span class="deletion">-# Encrypt/Decrypt</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l144" name="l144">144</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Encrypt/Decrypt</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l145" name="l145">145</a></td><td><pre> * `gpg --recipient user-id --encrypt doc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l146" name="l146">146</a></td><td><pre> * `gpg --output doc --decrypt doc.gpg`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l147" name="l147">147</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l148" name="l148">148</a></td><td><pre><span class="hunk">@@ -47,26 +49,26 @@</span> </span>or...</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l149" name="l149">149</a></td><td><pre> * `gpg -c --s2k-cipher-algo AES256 --s2k-digest-algo SHA512 --s2k-count 65536 doc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l150" name="l150">150</a></td><td><pre> * `gpg --output doc --decrypt doc.gpg`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l151" name="l151">151</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l152" name="l152">152</a></td><td><pre><span class="deletion">-# Signing</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l153" name="l153">153</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Signing</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l154" name="l154">154</a></td><td><pre> * `gpg --output doc.sig --sign doc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l155" name="l155">155</a></td><td><pre> * `gpg --output doc.sig --clearsign doc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l156" name="l156">156</a></td><td><pre> * `gpg --output doc.sig --detach-sig doc`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l157" name="l157">157</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l158" name="l158">158</a></td><td><pre><span class="deletion">-# Verify</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l159" name="l159">159</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Verify</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l160" name="l160">160</a></td><td><pre> * `gpg --verify doc.sig`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l161" name="l161">161</a></td><td><pre> * `gpg --verify archlinux-version.iso.sig`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l162" name="l162">162</a></td><td><pre> * `gpg --verify archlinux-version.iso.sig /path/to/archlinux-version.iso`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l163" name="l163">163</a></td><td><pre> * `gpg --with-fingerprint &lt;keyfile&gt;`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l164" name="l164">164</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l165" name="l165">165</a></td><td><pre><span class="deletion">-# Send keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l166" name="l166">166</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Send keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l167" name="l167">167</a></td><td><pre> * `gpg --send-keys &lt;userid&gt;`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l168" name="l168">168</a></td><td><pre> * `gpg --refresh-keys`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l169" name="l169">169</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l170" name="l170">170</a></td><td><pre><span class="deletion">-# Get keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l171" name="l171">171</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Get keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l172" name="l172">172</a></td><td><pre> * `gpg --recv-key '&lt;fingerprint&gt;'`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l173" name="l173">173</a></td><td><pre> * `gpg --fingerprint '&lt;fingerprint&gt;'`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l174" name="l174">174</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l175" name="l175">175</a></td><td><pre><span class="deletion">-# Sign key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l176" name="l176">176</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Sign key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l177" name="l177">177</a></td><td><pre> * `gpg --lsign-key '&lt;fingerprint&gt;'`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l178" name="l178">178</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l179" name="l179">179</a></td><td><pre> or...</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l180" name="l180">180</a></td><td><pre><span class="bold">diff --git a/docs/ssh.md b/docs/ssh.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l181" name="l181">181</a></td><td><pre><span class="bold">index d3fd080..4bc551f 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l182" name="l182">182</a></td><td><pre><span class="bold">--- a/docs/ssh.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l183" name="l183">183</a></td><td><pre><span class="bold">+++ b/docs/ssh.md</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l184" name="l184">184</a></td><td><pre><span class="hunk">@@ -1,8 +1,9 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l185" name="l185">185</a></td><td><pre><span class="deletion">-A full write-up on OpenSSH usage with security in mind.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l186" name="l186">186</a></td><td><pre><span class="insertion">+</span><span class="insertion"># SSH Security</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l187" name="l187">187</a></td><td><pre><span class="insertion">+</span><span class="insertion">&gt; A full write-up on OpenSSH usage with security in mind.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l188" name="l188">188</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l189" name="l189">189</a></td><td><pre> ---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l190" name="l190">190</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l191" name="l191">191</a></td><td><pre><span class="deletion">-# Table of Contents</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l192" name="l192">192</a></td><td><pre><span class="insertion">+</span><span class="insertion">## Table of Contents</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l193" name="l193">193</a></td><td><pre> * [Generating An SSH Key Pair](#generating-an-ssh-key-pair)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l194" name="l194">194</a></td><td><pre> 	- [Linux](#linux)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l195" name="l195">195</a></td><td><pre> 	- [Windows](#windows)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l196" name="l196">196</a></td><td><pre><span class="hunk">@@ -29,8 +30,8 @@</span> </span>A full write-up on OpenSSH usage with security in mind.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l197" name="l197">197</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l198" name="l198">198</a></td><td><pre> ---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l199" name="l199">199</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l200" name="l200">200</a></td><td><pre><span class="deletion">-## Generating An SSH Key Pair</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l201" name="l201">201</a></td><td><pre><span class="deletion">-### Linux</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l202" name="l202">202</a></td><td><pre><span class="insertion">+</span><span class="insertion">### Generating An SSH Key Pair</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l203" name="l203">203</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Linux</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l204" name="l204">204</a></td><td><pre> Generate a key using the **Ed25519** algorithm with 500 KDF rounds:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l205" name="l205">205</a></td><td><pre> * `ssh-keygen -t ed25519 -a 500 -C &quot;$(whoami)@$(hostname)-$(date -I)&quot;`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l206" name="l206">206</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l207" name="l207">207</a></td><td><pre><span class="hunk">@@ -42,7 +43,7 @@</span> </span>You only need to backup your private key. Public keys can be regenerated from th</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l208" name="l208">208</a></td><td><pre> Copy your public key to clipboard:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l209" name="l209">209</a></td><td><pre> * `cat ~/.ssh/acidvegas@pi-2017-01-01.pub`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l210" name="l210">210</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l211" name="l211">211</a></td><td><pre><span class="deletion">-### Windows</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l212" name="l212">212</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Windows</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l213" name="l213">213</a></td><td><pre> Download &amp; run [puttygen](https://the.earth.li/~sgtatham/putty/latest/w32/puttygen.exe).</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l214" name="l214">214</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l215" name="l215">215</a></td><td><pre> Once opened, change the key type to **ED25519** under the *Parameters* box, and then click the *Generate* button.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l216" name="l216">216</a></td><td><pre><span class="hunk">@@ -53,8 +54,8 @@</span> </span>You only need to backup your private key. Public keys can be regenerated by clic</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l217" name="l217">217</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l218" name="l218">218</a></td><td><pre> Copy the data in the box labeled *Public key for pasting into OpenSSH authorized_keys file*.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l219" name="l219">219</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l220" name="l220">220</a></td><td><pre><span class="deletion">-## Getting Your Client To Use Your SSH Key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l221" name="l221">221</a></td><td><pre><span class="deletion">-### Linux</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l222" name="l222">222</a></td><td><pre><span class="insertion">+</span><span class="insertion">### Getting Your Client To Use Your SSH Key</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l223" name="l223">223</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Linux</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l224" name="l224">224</a></td><td><pre> * `ssh -p 65150 -i ~/.ssh/acidvegas@pi-2017-01-01 acidvegas@192.168.1.10`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l225" name="l225">225</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l226" name="l226">226</a></td><td><pre> or...</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l227" name="l227">227</a></td><td><pre><span class="hunk">@@ -71,7 +72,7 @@</span> </span>Host acidbox</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l228" name="l228">228</a></td><td><pre> * `chmod 600 ~/.ssh/config`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l229" name="l229">229</a></td><td><pre> * Usage: `ssh acidbox`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l230" name="l230">230</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l231" name="l231">231</a></td><td><pre><span class="deletion">-### Windows</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l232" name="l232">232</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Windows</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l233" name="l233">233</a></td><td><pre> Download &amp; run the [putty](https://the.earth.li/~sgtatham/putty/latest/w32/putty.exe) client.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l234" name="l234">234</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l235" name="l235">235</a></td><td><pre> Once opened, select `Connection -&gt; SSH -&gt; Auth` from the *Category* box. Click the *Browse* button and select your private key.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l236" name="l236">236</a></td><td><pre><span class="hunk">@@ -84,8 +85,8 @@</span> </span>SSH into your server by clicking your saved session from the *Saved Sessions* bo</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l237" name="l237">237</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l238" name="l238">238</a></td><td><pre> ---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l239" name="l239">239</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l240" name="l240">240</a></td><td><pre><span class="deletion">-## Setup Server</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l241" name="l241">241</a></td><td><pre><span class="deletion">-### Harden OpenSSH Daemon</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l242" name="l242">242</a></td><td><pre><span class="insertion">+</span><span class="insertion">### Setup Server</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l243" name="l243">243</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Harden OpenSSH Daemon</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l244" name="l244">244</a></td><td><pre> * `nano /etc/ssh/sshd_config`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l245" name="l245">245</a></td><td><pre> ```</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l246" name="l246">246</a></td><td><pre> AddressFamily any</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l247" name="l247">247</a></td><td><pre><span class="hunk">@@ -128,7 +129,7 @@</span> </span>Protocol 2</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l248" name="l248">248</a></td><td><pre> * The `Port` option should be set to a non-standard port *(High-value port number recommended)*. </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l249" name="l249">249</a></td><td><pre> * The `PrintMotd` option can be changed to **yes** if the file `/etc/motd` exists. This is shown after the user authenticates.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l250" name="l250">250</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l251" name="l251">251</a></td><td><pre><span class="deletion">-### Create A New User On The Server</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l252" name="l252">252</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Create A New User On The Server</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l253" name="l253">253</a></td><td><pre> Create a new user on the server with a password:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l254" name="l254">254</a></td><td><pre> * `useradd -m -s /bin/bash acidvegas`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l255" name="l255">255</a></td><td><pre> * `passwd acidvegas`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l256" name="l256">256</a></td><td><pre><span class="hunk">@@ -137,7 +138,7 @@</span> </span>Create an **ssh** group and add your user to the group.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l257" name="l257">257</a></td><td><pre> * `groupadd ssh`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l258" name="l258">258</a></td><td><pre> * `gpasswd -a acidvegas ssh`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l259" name="l259">259</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l260" name="l260">260</a></td><td><pre><span class="deletion">-### Copy Your Public Key To Your Shell</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l261" name="l261">261</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Copy Your Public Key To Your Shell</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l262" name="l262">262</a></td><td><pre> * `nano /etc/ssh/authorized_keys/acidvegas` *(Paste your public key data in this file)*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l263" name="l263">263</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l264" name="l264">264</a></td><td><pre> **Note:** This is only required if you are using the `AuthorizedKeysFile /etc/ssh/authorized_keys/%u` line in your `sshd_config` file. For using the standard `~/.ssh/authorized_keys` file, do the follow:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l265" name="l265">265</a></td><td><pre><span class="hunk">@@ -152,8 +153,8 @@</span> </span>Create an **ssh** group and add your user to the group.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l266" name="l266">266</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l267" name="l267">267</a></td><td><pre> ---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l268" name="l268">268</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l269" name="l269">269</a></td><td><pre><span class="deletion">-# Extra Security</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l270" name="l270">270</a></td><td><pre><span class="deletion">-### Allow Incoming SSH Connections Through IPTables</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l271" name="l271">271</a></td><td><pre><span class="insertion">+</span><span class="insertion">### Extra Security</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l272" name="l272">272</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Allow Incoming SSH Connections Through IPTables</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l273" name="l273">273</a></td><td><pre> ```</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l274" name="l274">274</a></td><td><pre> iptables -A INPUT  -i eth0 -p tcp --dport 65150 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l275" name="l275">275</a></td><td><pre> iptables -A OUTPUT -o eth0 -p tcp --sport 65150 -m conntrack --ctstate ESTABLISHED     -j ACCEPT</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l276" name="l276">276</a></td><td><pre><span class="hunk">@@ -164,10 +165,10 @@</span> </span>You can also allow only incomming connection from a specific IP address instead</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l277" name="l277">277</a></td><td><pre> iptables -A INPUT -i eth0 -p tcp -s 192.168.1.99 --dport 65150 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l278" name="l278">278</a></td><td><pre> ```</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l279" name="l279">279</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l280" name="l280">280</a></td><td><pre><span class="deletion">-### Lock Users In A Chroot Jail Environment</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l281" name="l281">281</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Lock Users In A Chroot Jail Environment</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l282" name="l282">282</a></td><td><pre> See [mkchroot](https://github.com/acidvegas/mkchroot) repository for details.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l283" name="l283">283</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l284" name="l284">284</a></td><td><pre><span class="deletion">-### Port Knocking</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l285" name="l285">285</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Port Knocking</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l286" name="l286">286</a></td><td><pre> The following is an example which uses the port knocking sequence `8881 -&gt; 7777 -&gt; 9991` to open port 65150 for 30 seconds.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l287" name="l287">287</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l288" name="l288">288</a></td><td><pre> ##### Server </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l289" name="l289">289</a></td><td><pre><span class="hunk">@@ -216,8 +217,8 @@</span> </span>Download &amp; install the [knockd](http://www.zeroflux.org/projects/knock) package.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l290" name="l290">290</a></td><td><pre> 	stop_command  = /usr/bin/iptables -D TCP -s %IP% -p tcp --dport 65150 -j ACCEPT</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l291" name="l291">291</a></td><td><pre> ```</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l292" name="l292">292</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l293" name="l293">293</a></td><td><pre><span class="deletion">-##### Knocking Your Server</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l294" name="l294">294</a></td><td><pre><span class="deletion">-###### Using Nmap</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l295" name="l295">295</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Knocking Your Server</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l296" name="l296">296</a></td><td><pre><span class="insertion">+</span><span class="insertion">##### Using Nmap</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l297" name="l297">297</a></td><td><pre> Download &amp; install the [nmap](https://nmap.org/) package.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l298" name="l298">298</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l299" name="l299">299</a></td><td><pre> * `nano knock.sh`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l300" name="l300">300</a></td><td><pre><span class="hunk">@@ -232,12 +233,12 @@</span> </span>done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l301" name="l301">301</a></td><td><pre> ```</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l302" name="l302">302</a></td><td><pre> * Usage: `sh knock.sh example.server.com 8881 7777 9991`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l303" name="l303">303</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l304" name="l304">304</a></td><td><pre><span class="deletion">-###### Using Knockd</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l305" name="l305">305</a></td><td><pre><span class="insertion">+</span><span class="insertion">##### Using Knockd</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l306" name="l306">306</a></td><td><pre> Download &amp; install the [knockd](http://www.zeroflux.org/projects/knock) package.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l307" name="l307">307</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l308" name="l308">308</a></td><td><pre> * `knock -v example.server.com 8881:tcp 7777:tcp 9991:tcp`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l309" name="l309">309</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l310" name="l310">310</a></td><td><pre><span class="deletion">-### Jump Hosts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l311" name="l311">311</a></td><td><pre><span class="insertion">+</span><span class="insertion">#### Jump Hosts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l312" name="l312">312</a></td><td><pre> * `ssh -J &lt;jumphost&gt; &lt;host&gt;`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l313" name="l313">313</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l314" name="l314">314</a></td><td><pre> The `&lt;jumphost&gt;` option can be `user@host`, `user@host:port` or an host setup in your `~/.ssh/config`.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l315" name="l315">315</a></td><td><pre><span class="hunk">@@ -265,7 +266,7 @@</span> </span>Connect to your target host with `ssh targetbox`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l316" name="l316">316</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l317" name="l317">317</a></td><td><pre> ---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l318" name="l318">318</a></td><td><pre> </span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l319" name="l319">319</a></td><td><pre><span class="deletion">-## Sources</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l320" name="l320">320</a></td><td><pre><span class="insertion">+</span><span class="insertion">### Sources</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l321" name="l321">321</a></td><td><pre> * https://wiki.archlinux.org/index.php/Port_knocking</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l322" name="l322">322</a></td><td><pre> * https://wiki.archlinux.org/index.php/SSH_keys</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l323" name="l323">323</a></td><td><pre> * https://wiki.mozilla.org/Security/Guidelines/OpenSSH</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l324" name="l324">324</a></td><td><pre><span class="bold">diff --git a/gitremote.sh b/gitremote.sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l325" name="l325">325</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l326" name="l326">326</a></td><td><pre><span class="bold">index ce6bb3f..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l327" name="l327">327</a></td><td><pre><span class="bold">--- a/gitremote.sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l328" name="l328">328</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l329" name="l329">329</a></td><td><pre><span class="hunk">@@ -1,14 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l330" name="l330">330</a></td><td><pre><span class="deletion">-#!/bin/sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l331" name="l331">331</a></td><td><pre><span class="deletion">-set -e</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l332" name="l332">332</a></td><td><pre><span class="deletion">-for u in $HOME/dev/git/*/; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l333" name="l333">333</a></td><td><pre><span class="deletion">-	for d in $(find $u -name .git -type d -prune | sort); do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l334" name="l334">334</a></td><td><pre><span class="deletion">-		u=$(basename $u)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l335" name="l335">335</a></td><td><pre><span class="deletion">-		r=$(basename -s .git `git --git-dir $d config --get remote.origin.url`)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l336" name="l336">336</a></td><td><pre><span class="deletion">-		echo &quot;updating $r...&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l337" name="l337">337</a></td><td><pre><span class="deletion">-		git -C $d remote remove origin</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l338" name="l338">338</a></td><td><pre><span class="deletion">-		git -C $d remote add origin git@github.com:$s/$r.git</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l339" name="l339">339</a></td><td><pre><span class="deletion">-		git -C $d remote set-url --add --push origin git@github.com:$u/$r.git</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l340" name="l340">340</a></td><td><pre><span class="deletion">-		git -C $d remote set-url --add --push origin git@gitlab.com:$u/$r.git</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l341" name="l341">341</a></td><td><pre><span class="deletion">-		git -C $d remote set-url --add --push origin git@contra:$r.git</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l342" name="l342">342</a></td><td><pre><span class="deletion">-	done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l343" name="l343">343</a></td><td><pre><span class="deletion">-done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l344" name="l344">344</a></td><td><pre><span class="bold">diff --git a/mkchroot b/mkchroot</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l345" name="l345">345</a></td><td><pre><span class="bold">new file mode 100755</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l346" name="l346">346</a></td><td><pre><span class="bold">index 0000000..4b22e2c</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l347" name="l347">347</a></td><td><pre><span class="bold">--- /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l348" name="l348">348</a></td><td><pre><span class="bold">+++ b/mkchroot</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l349" name="l349">349</a></td><td><pre><span class="hunk">@@ -0,0 +1,153 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l350" name="l350">350</a></td><td><pre><span class="insertion">+</span><span class="insertion">#!/bin/sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l351" name="l351">351</a></td><td><pre><span class="insertion">+</span><span class="insertion">set -e</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l352" name="l352">352</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l353" name="l353">353</a></td><td><pre><span class="insertion">+</span><span class="insertion">CHROOT_BASE=&quot;/var/jail&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l354" name="l354">354</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l355" name="l355">355</a></td><td><pre><span class="insertion">+</span><span class="insertion">display_help() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l356" name="l356">356</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;usage: mkchroot [option]&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l357" name="l357">357</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo -e &quot;\nexample: mkchroot --create=acidvegas bash cp irssi ls mkdir mv rm screen wget&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l358" name="l358">358</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo -e &quot;\noptions:&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l359" name="l359">359</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;  -c, --create=USER   &lt;cmds&gt;  create a new chroot jail&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l360" name="l360">360</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;  -d, --destroy=USER          destroy a chroot jail&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l361" name="l361">361</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;  -l, --list                  list chroot jails&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l362" name="l362">362</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;  -h, --help                  display this help and exit&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l363" name="l363">363</a></td><td><pre><span class="insertion">+</span><span class="insertion">}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l364" name="l364">364</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l365" name="l365">365</a></td><td><pre><span class="insertion">+</span><span class="insertion">create_jail() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l366" name="l366">366</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">[ $EUID -ne 0 ] &amp;&amp; echo &quot;insufficent privledges&quot; &amp;&amp; exit 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l367" name="l367">367</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if [ ${#1} -ne 2 ]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l368" name="l368">368</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">CHROOT_USER=&quot;${1#*=}&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l369" name="l369">369</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">CHROOT_CMDS=&quot;${@:2}&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l370" name="l370">370</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">else</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l371" name="l371">371</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">CHROOT_USER=$2</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l372" name="l372">372</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">CHROOT_CMDS=&quot;${@:3}&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l373" name="l373">373</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l374" name="l374">374</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">CHROOT_DIR=&quot;$CHROOT_BASE/$CHROOT_USER&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l375" name="l375">375</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">CHROOT_PWD=&quot;$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 25 | head -n 1)&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l376" name="l376">376</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">[ -d $CHROOT_DIR ] &amp;&amp; echo &quot;chroot jail already exists for $CHROOT_USER at $CHROOT_DIR&quot; &amp;&amp; exit 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l377" name="l377">377</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;creating initial directory structure...&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l378" name="l378">378</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mkdir -v $CHROOT_DIR</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l379" name="l379">379</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mkdir -pv $CHROOT_DIR/{dev,etc,home,proc,usr}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l380" name="l380">380</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mkdir -v $CHROOT_DIR/dev/pts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l381" name="l381">381</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mkdir -v $CHROOT_DIR/home/$CHROOT_USER</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l382" name="l382">382</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mkdir -v $CHROOT_DIR/usr/share</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l383" name="l383">383</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;making required devices nodes...&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l384" name="l384">384</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mknod -m 666 $CHROOT_DIR/dev/null c 1 3</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l385" name="l385">385</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;created device node: $CHROOT_DIR/dev/null&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l386" name="l386">386</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mknod -m 666 $CHROOT_DIR/dev/tty c 5 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l387" name="l387">387</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;created device node: $CHROOT_DIR/dev/tty&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l388" name="l388">388</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mknod -m 666 $CHROOT_DIR/dev/random c 1 8</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l389" name="l389">389</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;created device node: $CHROOT_DIR/dev/random&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l390" name="l390">390</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">mknod -m 666 $CHROOT_DIR/dev/zero c 1 5</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l391" name="l391">391</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;created device node: $CHROOT_DIR/dev/zero&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l392" name="l392">392</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;copying required shared libraries...&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l393" name="l393">393</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">for x in ${CHROOT_CMDS[@]}; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l394" name="l394">394</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">for y in $(ldd $(which $x)|grep -v dynamic|cut -d &quot; &quot; -f 3|sed 's/://'|sort|uniq); do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l395" name="l395">395</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">cp --parents -v $y $CHROOT_DIR</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l396" name="l396">396</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l397" name="l397">397</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l398" name="l398">398</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;copying additional required files...&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l399" name="l399">399</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if [ ! -d $CHROOT_DIR/bin ] &amp;&amp; [ -d $CHROOT_DIR/usr/bin ]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l400" name="l400">400</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">cp -r $CHROOT_DIR/usr/bin $CHROOT_DIR/bin	# This can be improved.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l401" name="l401">401</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l402" name="l402">402</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if [ ! -d $CHROOT_DIR/lib ] &amp;&amp; [ -d $CHROOT_DIR/usr/lib ]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l403" name="l403">403</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">cp -r $CHROOT_DIR/usr/lib $CHROOT_DIR/lib	# This can be improved.</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l404" name="l404">404</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l405" name="l405">405</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">cp -v /etc/{hosts,ld.so.cache,ld.so.conf,localtime,nsswitch.conf,resolv.conf} $CHROOT_DIR/etc/</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l406" name="l406">406</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">cp -v /lib/ld-linux.so.* $CHROOT_DIR/lib/</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l407" name="l407">407</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">cp -rv /lib/terminfo/ $CHROOT_DIR/lib/</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l408" name="l408">408</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">cp -rv /usr/share/terminfo/ $CHROOT_DIR/usr/share/</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l409" name="l409">409</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">grep $CHROOT_USER /etc/passwd &gt; $CHROOT_DIR/etc/passwd</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l410" name="l410">410</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">grep $CHROOT_USER /etc/group  &gt; $CHROOT_DIR/etc/group</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l411" name="l411">411</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">grep $CHROOT_USER /etc/shadow &gt; $CHROOT_DIR/etc/shadow</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l412" name="l412">412</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo -e &quot;[[ \$- != *i* ]] &amp;&amp; return\nalias ls='ls --color=auto'\nPS1='\e[1;30mjail\e[0m | \e[1;34m&gt; \e[0;32m\w \e[0;37m: '&quot; &gt; $CHROOT_DIR/home/$CHROOT_USER/.bash_profile</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l413" name="l413">413</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if ! id $CHROOT_USER &gt;/dev/null 2&gt;&amp;1; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l414" name="l414">414</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">useradd -s /bin/bash -M -p $CHROOT_PWD $CHROOT_USER</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l415" name="l415">415</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;added $CHROOT_USER user&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l416" name="l416">416</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l417" name="l417">417</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if [ ! $(getent group jail) ]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l418" name="l418">418</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">groupadd jail</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l419" name="l419">419</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;added jail group&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l420" name="l420">420</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l421" name="l421">421</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if ! getent group jail | grep &amp;&gt;/dev/null &quot;\b${CHROOT_USER}\b&quot;; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l422" name="l422">422</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">gpasswd -a $CHROOT_USER jail</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l423" name="l423">423</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;added $CHROOT_USER to jail group&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l424" name="l424">424</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l425" name="l425">425</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;setting permissions...&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l426" name="l426">426</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chown -v root:root $CHROOT_DIR</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l427" name="l427">427</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chown -v root:tty $CHROOT_DIR/dev/tty</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l428" name="l428">428</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chown -v $CHROOT_USER:$CHROOT_USER $CHROOT_DIR/home/$CHROOT_USER</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l429" name="l429">429</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chmod -Rv 755 $CHROOT_DIR/home/$CHROOT_USER</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l430" name="l430">430</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chattr +i $CHROOT_DIR/etc/group</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l431" name="l431">431</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chattr +i $CHROOT_DIR/etc/hosts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l432" name="l432">432</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chattr +i $CHROOT_DIR/etc/nsswitch.conf</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l433" name="l433">433</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chattr +i $CHROOT_DIR/etc/passwd</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l434" name="l434">434</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chattr +i $CHROOT_DIR/etc/resolv.conf</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l435" name="l435">435</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">chattr +i $CHROOT_DIR/etc/shadow</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l436" name="l436">436</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;mounting pseudoterminal slave device on $CHROOT_DIR/dev/pts&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l437" name="l437">437</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if ! grep -q &quot;devpts $CHROOT_DIR/dev/pts devpts rw,noatime,mode=600,ptmxmode=000 0 0&quot; /etc/fstab; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l438" name="l438">438</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo -e &quot;\ndevpts $CHROOT_DIR/dev/pts devpts rw,noatime,mode=600,ptmxmode=000 0 0&quot; &gt;&gt; /etc/fstab</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l439" name="l439">439</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">mount -av</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l440" name="l440">440</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l441" name="l441">441</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if ! grep -q &quot;proc $CHROOT_DIR/proc proc rw,noatime,gid=26,hidepid=2 0 0&quot; /etc/fstab; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l442" name="l442">442</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo -e &quot;\nproc $CHROOT_DIR/proc proc rw,noatime,gid=26,hidepid=2 0 0&quot; &gt;&gt; /etc/fstab</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l443" name="l443">443</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">mount -av</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l444" name="l444">444</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l445" name="l445">445</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if grep -q &quot;AuthorizedKeysFile&quot; /etc/ssh/sshd_config; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l446" name="l446">446</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">if ! grep -q &quot;AuthorizedKeysFile /etc/ssh/authorized_keys/%u&quot; /etc/ssh/sshd_config; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l447" name="l447">447</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">sed 's/AuthorizedKeysFile.*/AuthorizedKeysFile /etc/ssh/authorized_keys/%u/' /etc/ssh/sshd_config &gt; /etc/ssh/sshd_config</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l448" name="l448">448</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">echo &quot;updated sshd_config with AuthorizedKeysFile&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l449" name="l449">449</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l450" name="l450">450</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">else</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l451" name="l451">451</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">sed -i &quot;1iAuthorizedKeysFile /etc/ssh/authorized_keys/%u&quot; /etc/ssh/sshd_config</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l452" name="l452">452</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l453" name="l453">453</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if ! grep $'Match Group jail\n\tChrootDirectory /var/jail/%u' /etc/ssh/sshd_config; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l454" name="l454">454</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo -e &quot;\nMatch Group jail\n\tChrootDirectory /var/jail/%u&quot; &gt;&gt; /etc/ssh/sshd_config</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l455" name="l455">455</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;updated sshd_config with ChrootDirectory&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l456" name="l456">456</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l457" name="l457">457</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo -e &quot;\nchroot jail for $CHROOT_USER created at $CHROOT_DIR&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l458" name="l458">458</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;password for $CHROOT_USER is: $CHROOT_PWD&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l459" name="l459">459</a></td><td><pre><span class="insertion">+</span><span class="insertion">}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l460" name="l460">460</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l461" name="l461">461</a></td><td><pre><span class="insertion">+</span><span class="insertion">destroy_jail() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l462" name="l462">462</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">[ $EUID -ne 0 ] &amp;&amp; echo &quot;insufficent privledges&quot; &amp;&amp; exit 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l463" name="l463">463</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if [[ ${#1} -ne 2 ]]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l464" name="l464">464</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">CHROOT_USER=&quot;${1#*=}&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l465" name="l465">465</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">else</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l466" name="l466">466</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">CHROOT_USER=$2</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l467" name="l467">467</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l468" name="l468">468</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">CHROOT_DIR=&quot;$CHROOT_BASE/$CHROOT_USER&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l469" name="l469">469</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if mount | grep -q &quot;$CHROOT_DIR/dev/pts&quot;; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l470" name="l470">470</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">umount -v $CHROOT_DIR/dev/pts</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l471" name="l471">471</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;unmounted pseudoterminal slave device&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l472" name="l472">472</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l473" name="l473">473</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if mount | grep -q &quot;$CHROOT_DIR/proc&quot;; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l474" name="l474">474</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">umount -v $CHROOT_DIR/proc</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l475" name="l475">475</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;unmounted proc device&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l476" name="l476">476</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l477" name="l477">477</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if [ -d $CHROOT_DIR ]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l478" name="l478">478</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">chattr -i $CHROOT_DIR/etc/*</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l479" name="l479">479</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">rm -rfv $CHROOT_DIR</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l480" name="l480">480</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l481" name="l481">481</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">if id $CHROOT_USER &gt;/dev/null 2&gt;&amp;1; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l482" name="l482">482</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">userdel -f $CHROOT_USER</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l483" name="l483">483</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot;deleted $CHROOT_USER user&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l484" name="l484">484</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l485" name="l485">485</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo &quot;jail destroyed&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l486" name="l486">486</a></td><td><pre><span class="insertion">+</span><span class="insertion">}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l487" name="l487">487</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l488" name="l488">488</a></td><td><pre><span class="insertion">+</span><span class="insertion">list_jails() {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l489" name="l489">489</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">CHROOT_DIRS=$(getent group jail | cut -d: -f4 | sed 's/,/ /g')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l490" name="l490">490</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">for i in ${CHROOT_DIRS[@]}; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l491" name="l491">491</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">echo &quot; * $i&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l492" name="l492">492</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l493" name="l493">493</a></td><td><pre><span class="insertion">+</span><span class="insertion">}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l494" name="l494">494</a></td><td><pre><span class="insertion">+</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l495" name="l495">495</a></td><td><pre><span class="insertion">+</span><span class="insertion">[ &quot;$#&quot; -eq 0 ] &amp;&amp; echo -e &quot;invalid or missing arguments\n&quot; &amp;&amp; display_help &amp;&amp; exit 1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l496" name="l496">496</a></td><td><pre><span class="insertion">+</span><span class="insertion">case $1 in</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l497" name="l497">497</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">-c|--create=*)  create_jail  &quot;$@&quot; ;;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l498" name="l498">498</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">-d|--destroy=*) destroy_jail &quot;$@&quot; ;;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l499" name="l499">499</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">-l|--list)      list_jails        ;;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l500" name="l500">500</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">-h|--help)      display_help      ;;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l501" name="l501">501</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">*) echo -e &quot;invalid or missing arguments\n&quot;; display_help ; exit 1;;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l502" name="l502">502</a></td><td><pre><span class="insertion">+</span><span class="insertion">esac</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l503" name="l503">503</a></td><td><pre><span class="bold">diff --git a/networking/ap.py b/networking/ap.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l504" name="l504">504</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l505" name="l505">505</a></td><td><pre><span class="bold">index 48545fc..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l506" name="l506">506</a></td><td><pre><span class="bold">--- a/networking/ap.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l507" name="l507">507</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l508" name="l508">508</a></td><td><pre><span class="hunk">@@ -1,23 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l509" name="l509">509</a></td><td><pre><span class="deletion">-#!/usr/bin/env python</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l510" name="l510">510</a></td><td><pre><span class="deletion">-import re, subprocess</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l511" name="l511">511</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l512" name="l512">512</a></td><td><pre><span class="deletion">-interface = 'wlp1s0'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l513" name="l513">513</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l514" name="l514">514</a></td><td><pre><span class="deletion">-def between(source, start, stop):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l515" name="l515">515</a></td><td><pre><span class="deletion">-	data = re.compile(start + '(.*?)' + stop, re.IGNORECASE|re.MULTILINE).search(source)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l516" name="l516">516</a></td><td><pre><span class="deletion">-	if data : return data.group(1)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l517" name="l517">517</a></td><td><pre><span class="deletion">-	else    : return False</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l518" name="l518">518</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l519" name="l519">519</a></td><td><pre><span class="deletion">-output = subprocess.check_output(f'sudo iwlist {interface} scanning  | egrep \'Cell |Channel|Frequency|Encryption|Quality|ESSID|Mode\'', shell=True).decode()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l520" name="l520">520</a></td><td><pre><span class="deletion">-access_points = output.split(' Cell ')[1:]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l521" name="l521">521</a></td><td><pre><span class="deletion">-print('\033[30m\033[47mMAC Address         Channel   Frequency   Quality   Signal    Mode     Encryption   ESSID\033[0m')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l522" name="l522">522</a></td><td><pre><span class="deletion">-for ap in access_points:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l523" name="l523">523</a></td><td><pre><span class="deletion">-	address    = between(ap, 'Address: ',             '\n')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l524" name="l524">524</a></td><td><pre><span class="deletion">-	channel    = between(ap, 'Channel:',              '\n').ljust(7)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l525" name="l525">525</a></td><td><pre><span class="deletion">-	frequency  = between(ap, 'Frequency:',          ' GHz')[:3]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l526" name="l526">526</a></td><td><pre><span class="deletion">-	quality    = between(ap, 'Quality=',        '  Signal')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l527" name="l527">527</a></td><td><pre><span class="deletion">-	signal     = between(ap, 'Signal level=',       ' dBm')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l528" name="l528">528</a></td><td><pre><span class="deletion">-	encryption = between(ap, 'Encryption key:',       '\n').ljust(10)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l529" name="l529">529</a></td><td><pre><span class="deletion">-	essid      = between(ap, 'ESSID:\&quot;',            '\&quot;\n')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l530" name="l530">530</a></td><td><pre><span class="deletion">-	mode       = between(ap, 'Mode:',                 '\n')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l531" name="l531">531</a></td><td><pre><span class="deletion">-	print(f'{address} | {channel} | {frequency} GHz   | {quality}   | {signal} dBm | {mode} | {encryption} | {essid}')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l532" name="l532">532</a></td><td><pre><span class="bold">diff --git a/networking/discover.py b/networking/discover.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l533" name="l533">533</a></td><td><pre><span class="bold">index 23d9538..d3a4343 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l534" name="l534">534</a></td><td><pre><span class="bold">--- a/networking/discover.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l535" name="l535">535</a></td><td><pre><span class="bold">+++ b/networking/discover.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l536" name="l536">536</a></td><td><pre><span class="hunk">@@ -4,7 +4,7 @@</span> </span>import subprocess</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l537" name="l537">537</a></td><td><pre> def portscan(ip):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l538" name="l538">538</a></td><td><pre> 	ports = list()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l539" name="l539">539</a></td><td><pre> 	try:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l540" name="l540">540</a></td><td><pre><span class="deletion">-		cmd = subprocess.check_output('sudo nmap -F ' + ip, shell=True).decode()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l541" name="l541">541</a></td><td><pre><span class="insertion">+</span>		<span class="insertion">cmd = subprocess.check_output('nmap -F ' + ip, shell=True).decode()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l542" name="l542">542</a></td><td><pre> 		output = cmd.split('SERVICE')[1].split('MAC')[0].split('\n')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l543" name="l543">543</a></td><td><pre> 		for item in output:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l544" name="l544">544</a></td><td><pre> 			port = item.split('/')[0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l545" name="l545">545</a></td><td><pre><span class="hunk">@@ -17,7 +17,7 @@</span> </span>def portscan(ip):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l546" name="l546">546</a></td><td><pre> def scanhosts(subnet):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l547" name="l547">547</a></td><td><pre> 	data = list()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l548" name="l548">548</a></td><td><pre> 	matrix = {'ip':list(),'host':list(),'ports':list()}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l549" name="l549">549</a></td><td><pre><span class="deletion">-	cmd = subprocess.check_output(f'sudo nmap -sP {subnet}/24', shell=True).decode()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l550" name="l550">550</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">cmd = subprocess.check_output(f'nmap -sP {subnet}/24', shell=True).decode()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l551" name="l551">551</a></td><td><pre> 	output = cmd.split('Nmap scan report for ')[1:-1]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l552" name="l552">552</a></td><td><pre> 	for item in output:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l553" name="l553">553</a></td><td><pre> 		ip    = item.split('\n')[0]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l554" name="l554">554</a></td><td><pre><span class="bold">diff --git a/progress.sh b/progress.sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l555" name="l555">555</a></td><td><pre><span class="bold">new file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l556" name="l556">556</a></td><td><pre><span class="bold">index 0000000..a090f90</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l557" name="l557">557</a></td><td><pre><span class="bold">--- /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l558" name="l558">558</a></td><td><pre><span class="bold">+++ b/progress.sh</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l559" name="l559">559</a></td><td><pre><span class="hunk">@@ -0,0 +1,7 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l560" name="l560">560</a></td><td><pre><span class="insertion">+</span><span class="insertion">PROGRESS='#'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l561" name="l561">561</a></td><td><pre><span class="insertion">+</span><span class="insertion">for PERCENT in {1..100}; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l562" name="l562">562</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">echo -ne &quot;$PERCENT%\t$PROGRESS\r&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l563" name="l563">563</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">PROGRESS=&quot;$PROGRESS#&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l564" name="l564">564</a></td><td><pre><span class="insertion">+</span>	<span class="insertion">sleep 0.05</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l565" name="l565">565</a></td><td><pre><span class="insertion">+</span><span class="insertion">done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l566" name="l566">566</a></td><td><pre><span class="insertion">+</span><span class="insertion">echo -e &quot;\n&quot;</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l567" name="l567">567</a></td><td><pre><span class="bold">diff --git a/scales.py b/scales.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l568" name="l568">568</a></td><td><pre><span class="bold">deleted file mode 100644</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l569" name="l569">569</a></td><td><pre><span class="bold">index 8cbe94b..0000000</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l570" name="l570">570</a></td><td><pre><span class="bold">--- a/scales.py</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l571" name="l571">571</a></td><td><pre><span class="bold">+++ /dev/null</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l572" name="l572">572</a></td><td><pre><span class="hunk">@@ -1,88 +0,0 @@</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l573" name="l573">573</a></td><td><pre><span class="deletion">-#!/usr/bin/env python</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l574" name="l574">574</a></td><td><pre><span class="deletion">-# guitar scales generator - developed by acidvegas in python (https://acid.vegas/random)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l575" name="l575">575</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l576" name="l576">576</a></td><td><pre><span class="deletion">-scales = {</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l577" name="l577">577</a></td><td><pre><span class="deletion">-	'algerian'              :  '2131131', # 1 = Half-step | 2 = Whole-step | 3 = Whole-step-Half-step</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l578" name="l578">578</a></td><td><pre><span class="deletion">-	'aeolian'               :  '2122122',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l579" name="l579">579</a></td><td><pre><span class="deletion">-	'blues'                 :   '321132',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l580" name="l580">580</a></td><td><pre><span class="deletion">-	'chromatic'             :  '1111111',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l581" name="l581">581</a></td><td><pre><span class="deletion">-	'dorian'                :  '2122212',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l582" name="l582">582</a></td><td><pre><span class="deletion">-	'half_whole_diminished' : '12121212',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l583" name="l583">583</a></td><td><pre><span class="deletion">-	'harmonic_minor'        :  '2122131',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l584" name="l584">584</a></td><td><pre><span class="deletion">-	'ionian'                :  '2212221',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l585" name="l585">585</a></td><td><pre><span class="deletion">-	'locrian'               :  '1221222',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l586" name="l586">586</a></td><td><pre><span class="deletion">-	'lydian'                :  '2221221',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l587" name="l587">587</a></td><td><pre><span class="deletion">-	'major'                 :  '2212221',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l588" name="l588">588</a></td><td><pre><span class="deletion">-	'major_pentatonic'      :    '22323',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l589" name="l589">589</a></td><td><pre><span class="deletion">-	'melodic_minor'         :  '2122221',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l590" name="l590">590</a></td><td><pre><span class="deletion">-	'mixolydian'            :  '2212212',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l591" name="l591">591</a></td><td><pre><span class="deletion">-	'natural_minor'         :  '2122122',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l592" name="l592">592</a></td><td><pre><span class="deletion">-	'persian'               :  '1311231',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l593" name="l593">593</a></td><td><pre><span class="deletion">-	'phrygian'              :  '1222122',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l594" name="l594">594</a></td><td><pre><span class="deletion">-	'whole_half_diminished' : '21212121',</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l595" name="l595">595</a></td><td><pre><span class="deletion">-	'whole_tone'            :  '2222222'</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l596" name="l596">596</a></td><td><pre><span class="deletion">-}</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l597" name="l597">597</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l598" name="l598">598</a></td><td><pre><span class="deletion">-def generate_notes(key):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l599" name="l599">599</a></td><td><pre><span class="deletion">-	notes = ['A','A#','B','C','C#','D','D#','E','F','F#','G','G#']</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l600" name="l600">600</a></td><td><pre><span class="deletion">-	while notes[0] != key:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l601" name="l601">601</a></td><td><pre><span class="deletion">-		notes.append(notes.pop(0))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l602" name="l602">602</a></td><td><pre><span class="deletion">-	return notes</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l603" name="l603">603</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l604" name="l604">604</a></td><td><pre><span class="deletion">-def generate_scale(string, scale_notes, full=False):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l605" name="l605">605</a></td><td><pre><span class="deletion">-	notes = generate_notes(string.upper())*2 if full else generate_notes(string.upper())</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l606" name="l606">606</a></td><td><pre><span class="deletion">-	notes.append(notes[0])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l607" name="l607">607</a></td><td><pre><span class="deletion">-	for index,note in enumerate(notes):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l608" name="l608">608</a></td><td><pre><span class="deletion">-		if note in scale_notes:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l609" name="l609">609</a></td><td><pre><span class="deletion">-			notes[index] = notes[index].center(5, '-')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l610" name="l610">610</a></td><td><pre><span class="deletion">-		else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l611" name="l611">611</a></td><td><pre><span class="deletion">-			notes[index] = '-'*5</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l612" name="l612">612</a></td><td><pre><span class="deletion">-	return notes</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l613" name="l613">613</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l614" name="l614">614</a></td><td><pre><span class="deletion">-def get_pattern(pattern):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l615" name="l615">615</a></td><td><pre><span class="deletion">-	new_pattern = list()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l616" name="l616">616</a></td><td><pre><span class="deletion">-	for step in pattern:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l617" name="l617">617</a></td><td><pre><span class="deletion">-		if   step == '1' : new_pattern.append('H')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l618" name="l618">618</a></td><td><pre><span class="deletion">-		elif step == '2' : new_pattern.append('W')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l619" name="l619">619</a></td><td><pre><span class="deletion">-		elif step == '3' : new_pattern.append('WH')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l620" name="l620">620</a></td><td><pre><span class="deletion">-	return ' '.join(new_pattern)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l621" name="l621">621</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l622" name="l622">622</a></td><td><pre><span class="deletion">-def scale(type, key):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l623" name="l623">623</a></td><td><pre><span class="deletion">-	last = 0</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l624" name="l624">624</a></td><td><pre><span class="deletion">-	notes = generate_notes(key)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l625" name="l625">625</a></td><td><pre><span class="deletion">-	scale_notes = [notes[0],]</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l626" name="l626">626</a></td><td><pre><span class="deletion">-	for step in scales[type]:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l627" name="l627">627</a></td><td><pre><span class="deletion">-		last += int(step)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l628" name="l628">628</a></td><td><pre><span class="deletion">-		if last &gt;= len(notes):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l629" name="l629">629</a></td><td><pre><span class="deletion">-			last -= len(notes)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l630" name="l630">630</a></td><td><pre><span class="deletion">-		scale_notes.append(notes[last])</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l631" name="l631">631</a></td><td><pre><span class="deletion">-	return scale_notes</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l632" name="l632">632</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l633" name="l633">633</a></td><td><pre><span class="deletion">-def print_scale(root, type, full=False):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l634" name="l634">634</a></td><td><pre><span class="deletion">-	if root.upper() not in ('A','A#','B','C','C#','D','D#','E','F','F#','G','G#'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l635" name="l635">635</a></td><td><pre><span class="deletion">-		raise SystemExit('invalid root note')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l636" name="l636">636</a></td><td><pre><span class="deletion">-	elif type.lower() not in scales:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l637" name="l637">637</a></td><td><pre><span class="deletion">-		raise SystemExit('invalid scale type')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l638" name="l638">638</a></td><td><pre><span class="deletion">-	else:</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l639" name="l639">639</a></td><td><pre><span class="deletion">-		frets = (24,147) if full else (12,75)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l640" name="l640">640</a></td><td><pre><span class="deletion">-		print(f'{root.upper()} {type.upper()} SCALE'.center(frets[1]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l641" name="l641">641</a></td><td><pre><span class="deletion">-		print('  ┌' + '┬'.join('─'*5 for x in range(frets[0])) + '┐')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l642" name="l642">642</a></td><td><pre><span class="deletion">-		print('0 │' + '│'.join(str(x).center(5) for x in range(1,frets[0]+1)) + '│')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l643" name="l643">643</a></td><td><pre><span class="deletion">-		print('  ├' + '┼'.join('─'*5 for x in range(frets[0])) + '┤')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l644" name="l644">644</a></td><td><pre><span class="deletion">-		scale_notes = scale(type, root)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l645" name="l645">645</a></td><td><pre><span class="deletion">-		for string in ('eBGDAE'):</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l646" name="l646">646</a></td><td><pre><span class="deletion">-			string_notes = generate_scale(string, scale_notes, full)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l647" name="l647">647</a></td><td><pre><span class="deletion">-			print(string + ' │' + '│'.join(note.center(5, '-') for note in string_notes[1:]) + '│')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l648" name="l648">648</a></td><td><pre><span class="deletion">-		print('  └' + '┴'.join('─'*5 for x in range(frets[0])) + '┘')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l649" name="l649">649</a></td><td><pre><span class="deletion">-		print((', '.join(scale_notes) + ' / ' + get_pattern(scales[type])).rjust(frets[1]))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l650" name="l650">650</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l651" name="l651">651</a></td><td><pre><span class="deletion">-def print_scales():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l652" name="l652">652</a></td><td><pre><span class="deletion">-	max_key = max(len(x) for x in scales)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l653" name="l653">653</a></td><td><pre><span class="deletion">-	max_value = max(len(get_pattern(scales[x])) for x in scales)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l654" name="l654">654</a></td><td><pre><span class="deletion">-	print('NAME'.ljust(max_key+3) + 'PATTERN'.rjust(max_value))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l655" name="l655">655</a></td><td><pre><span class="deletion">-	for name, pattern in scales.items():</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l656" name="l656">656</a></td><td><pre><span class="deletion">-		print(name.ljust(max_key) + ' │ ' + get_pattern(pattern).rjust(max_value))</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l657" name="l657">657</a></td><td><pre><span class="deletion">-</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l658" name="l658">658</a></td><td><pre><span class="deletion">-# Main</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l659" name="l659">659</a></td><td><pre><span class="deletion">-print_scales()</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l660" name="l660">660</a></td><td><pre><span class="deletion">-print_scale('F#','major')</span></pre></td></tr>
</table></pre>
