<!doctype html>
<link rel="stylesheet" href="../../style.css">
<title>stagit :: a31de98</title>
<h1><a href="../index.html" title="Back to Repository">&larr;&#xFE0E;</a> stagit :: a31de98</h1>
<hr>
<table id="main" cellpadding="0" cellspacing="0">
<tr class="item"><td class="linenumber"><a href="#l1" name="l1">1</a></td><td><pre><span class="commit">commit a31de98e39ccefcae5d5780ab8fb959bbadcbbde</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l2" name="l2">2</a></td><td><pre>Author: acidvegas &lt;acid.vegas@acid.vegas&gt;</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l3" name="l3">3</a></td><td><pre>Date:   Sun May 3 05:22:30 2020 -0400</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l4" name="l4">4</a></td><td><pre></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l5" name="l5">5</a></td><td><pre>    Fixed another bashism truncating string length. Should be all of them now</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l6" name="l6">6</a></td><td><pre>---</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l7" name="l7">7</a></td><td><pre> stagit | 4 <span class="insertion">+</span><span class="deletion">---</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l8" name="l8">8</a></td><td><pre> 1 file changed, 1 insertion(+), 3 deletions(-)</pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l9" name="l9">9</a></td><td><pre></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l10" name="l10">10</a></td><td><pre><span class="bold">diff --git a/stagit b/stagit</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l11" name="l11">11</a></td><td><pre><span class="bold">index a6d1690..369aad7 100755</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l12" name="l12">12</a></td><td><pre><span class="bold">--- a/stagit</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l13" name="l13">13</a></td><td><pre><span class="bold">+++ b/stagit</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l14" name="l14">14</a></td><td><pre><span class="hunk">@@ -152,7 +152,7 @@</span> </span>for d in $REPOS; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l15" name="l15">15</a></td><td><pre> 		COMMIT_HASH=$(echo $line | cut -d'|' -f4)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l16" name="l16">16</a></td><td><pre> 		COMMIT_MESSAGE=$(echo $line | cut -d'|' -f5 | sed 's/&amp;/\&amp;amp;/g;s/&lt;/\&amp;lt;/g;s/&gt;/\&amp;gt;/g;s/&quot;/\&amp;quot;/g;')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l17" name="l17">17</a></td><td><pre> 		if [ $MAX_COMMIT_MSG -ne 0 -a ${#COMMIT_MESSAGE} -gt $MAX_COMMIT_MSG ]; then</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l18" name="l18">18</a></td><td><pre><span class="deletion">-			COMMIT_MESSAGE=${COMMIT_MESSAGE:0:$MAX_COMMIT_MSG}... # todo: fix possible bashism</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l19" name="l19">19</a></td><td><pre><span class="insertion">+</span>			<span class="insertion">COMMIT_MESSAGE=$(echo $COMMIT_MESSAGE | cut -c 1-$MAX_COMMIT_MSG)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l20" name="l20">20</a></td><td><pre> 		fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l21" name="l21">21</a></td><td><pre> 		COMMIT_AUTHOR=$(echo $line | cut -d'|' -f6)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l22" name="l22">22</a></td><td><pre> 		COMMIT_DATE=$(echo $line | cut -d'|' -f7)</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l23" name="l23">23</a></td><td><pre><span class="hunk">@@ -170,10 +170,8 @@</span> </span>for d in $REPOS; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l24" name="l24">24</a></td><td><pre> 		COMMIT_DIFF=$(echo &quot;$COMMIT_DIFF&quot; | sed 's/\[31m/&lt;span class=&quot;deletion&quot;&gt;/g; s/\[1\;31m/&lt;span class=&quot;remote&quot;&gt;/g; s/\[32m/&lt;span class=&quot;insertion&quot;&gt;/g; s/\[1\;32m/&lt;span class=&quot;branch&quot;&gt;/g; s/\[33m/&lt;span class=&quot;commit&quot;&gt;/g; s/\[36m/&lt;span class=&quot;hunk&quot;&gt;/g; s/\[1\;36m/&lt;span class=&quot;reference&quot;&gt;/g; s/\[1m/&lt;span class=&quot;bold&quot;&gt;/g; s/\[m/&lt;\/span&gt;/g')</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l25" name="l25">25</a></td><td><pre> 		COUNT=1</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l26" name="l26">26</a></td><td><pre> 		echo &quot;$COMMIT_DIFF&quot; | while IFS= read -r line; do</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l27" name="l27">27</a></td><td><pre> 			echo &quot;&lt;tr class=\&quot;item\&quot;&gt;&lt;td class=\&quot;linenumber\&quot;&gt;&lt;a href=\&quot;#l$COUNT\&quot; name=\&quot;l$COUNT\&quot;&gt;$COUNT&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;$line&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot; &gt;&gt; $WWW_DIR/$REPO_NAME/commit/$COMMIT_HASH.html</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l28" name="l28">28</a></td><td><pre> 			COUNT=`expr $COUNT + 1`</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l29" name="l29">29</a></td><td><pre><span class="deletion">-			#fi</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l30" name="l30">30</a></td><td><pre> 		done</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l31" name="l31">31</a></td><td><pre> 		echo &quot;&lt;/table&gt;&quot; &gt;&gt; $WWW_DIR/$REPO_NAME/commit/$COMMIT_HASH.html</span></pre></td></tr>
<tr class="item"><td class="linenumber"><a href="#l32" name="l32">32</a></td><td><pre> 		generate_footer $WWW_DIR/$REPO_NAME/commit/$COMMIT_HASH.html</span></pre></td></tr>
</table>
<div id="footer">site generated by <a href="https://github.com/acidvegas/stagit" target="_blank">stagit</a> on <a href="#">05/03/20</a></div>
